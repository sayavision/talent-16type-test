<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>才能8軸診断＋星エレメント16タイプ（ベータ）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 16px;
      line-height: 1.7;
      background: #f7f7fb;
    }
    h1 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 16px 18px;
      margin: 12px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.04);
    }
    .question {
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid #eee;
    }
    .question:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }
    .question-title {
      font-weight: 600;
      margin-bottom: 6px;
    }
    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 0.9rem;
    }
    label.option {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #ddd;
      cursor: pointer;
      background: #fafafa;
    }
    input[type="radio"] {
      cursor: pointer;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      background: #4b7bec;
      color: white;
      margin-top: 8px;
    }
    button:disabled {
      opacity: 0.6;
      cursor: default;
    }
    .small {
      font-size: 0.85rem;
      color: #666;
    }
    .result-title {
      font-weight: 600;
      margin-bottom: 4px;
    }
    .axis-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin: 6px 0;
      font-size: 0.95rem;
    }
    .axis-label {
      min-width: 190px;
    }
    .axis-bar-wrap {
      flex: 1;
      background: #f0f0f5;
      border-radius: 999px;
      overflow: hidden;
      height: 10px;
    }
    .axis-bar {
      height: 100%;
      width: 0%;
      transition: width 0.4s;
    }
    .axis-percent {
      min-width: 40px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }
    .badge {
      display: inline-block;
      font-size: 0.75rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: #eef2ff;
      color: #3730a3;
      margin-left: 4px;
    }
    input[type="date"] {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #ccc;
      font-size: 0.9rem;
      margin-left: 4px;
    }
  </style>
</head>
<body>

  <!-- タイトル -->
  <div class="card">
    <h1>才能8軸診断＋星エレメント16タイプ（ベータ）</h1>
    <p class="small">
      あなたの中にある<strong>4つのエレメント</strong>（EARTH／FIRE／AIR／WATER）を、さらに8つの軸に分けて見ていきます。<br>
      48個の質問に、直感で1〜5を選んでください。
    </p>
    <p class="small">
      1：まったく当てはまらない／2：あまり当てはまらない／3：どちらともいえない／4：かなり当てはまる／5：とても当てはまる
    </p>
  </div>

  <!-- 生年月日入力 -->
  <div class="card">
    <div class="result-title">生年月日の入力（任意）</div>
    <p class="small">
      星とのかけ合わせ診断のために、生年月日を教えてください。<br>
      ここからあなたの<strong>12星座</strong>と<strong>星のエレメント</strong>を読み取ります。
    </p>
    <p class="small">
      生年月日：
      <input type="date" id="birthDate">
    </p>
    <p class="small">
      ※入力しなくても、才能8軸の結果は表示されます。<br>
      ※生年月日を入れると「星×才能」の16タイプ結果とメッセージが出ます。
    </p>
  </div>

  <!-- 質問フォーム -->
  <form id="quizForm" class="card">
    <div id="questionsContainer"></div>
    <button type="submit">結果を見る</button>
    <p class="small">※すべての質問に回答してからボタンを押してください。</p>
  </form>

  <!-- 結果表示 -->
  <div id="resultCard" class="card" style="display:none;">
    <div id="resultContent"></div>

    <!-- 結果シェア -->
    <div id="resultShare" style="margin-top:12px;">
      <button type="button" id="copyResultBtn">結果テキストをコピー</button>
      <button type="button" id="shareResultBtn">結果をシェア</button>
      <p id="shareMessage" class="small"></p>
    </div>

    <hr style="margin:14px 0;">
    <div class="result-title">4エレメントのレーダーチャート</div>
    <p class="small">全体のバランスを感覚的に眺めてみてください。</p>
    <canvas id="domainRadar" style="max-width: 100%;"></canvas>

    <!-- 星と才能のタイプ診断 -->
    <hr style="margin:16px 0;">
    <div id="astroSection">
      <div class="result-title">星と才能を合わせた16タイプ診断</div>
      <p class="small">
        生年月日から<strong>12星座</strong>と<strong>星のエレメント</strong>を判定し、才能エレメントとのかけ合わせでタイプを出します。<br>
        ※生年月日を入力していない場合、「星×才能」の結果は表示されません。
      </p>
      <div id="astroResultBox" class="small" style="margin-top:10px;"></div>
    </div>
  </div>

  <script>
    // ---- 8軸定義 ----
    const axes = {
      // EARTH：形にする領域
      X1: { id: "X1", label: "大地のデザイン軸", domain: "EARTH｜形にする領域" },
      X2: { id: "X2", label: "大地の実行軸",   domain: "EARTH｜形にする領域" },

      // FIRE：人と場を動かす領域
      I1: { id: "I1", label: "火の発信軸",     domain: "FIRE｜人と場を動かす領域" },
      I2: { id: "I2", label: "火の推進軸",     domain: "FIRE｜人と場を動かす領域" },

      // AIR：しくみを組む領域
      T1: { id: "T1", label: "風の分析軸",     domain: "AIR｜しくみを組む領域" },
      T2: { id: "T2", label: "風の探究軸",     domain: "AIR｜しくみを組む領域" },

      // WATER：絆を育てる領域
      R1: { id: "R1", label: "水の共感軸",     domain: "WATER｜絆を育てる領域" },
      R2: { id: "R2", label: "水のチーム軸",   domain: "WATER｜絆を育てる領域" }
    };

    const axisOrder = ["X1","X2","I1","I2","T1","T2","R1","R2"];

    // ---- 4エレメント説明 ----
    const domainDescriptions = {
      "EARTH｜形にする領域":
        "現実世界で一歩ずつ「形にしていく」エリア。計画を立てる・段取りする・やり切ることで、アイデアを現実の結果につなげていく領域です。",

      "FIRE｜人と場を動かす領域":
        "言葉や存在感で、人と場に火を灯すエリア。発信・説得・リーダーシップなどを通して、エネルギーを生み出し、周りを動かしていく領域です。",

      "AIR｜しくみを組む領域":
        "一歩引いた視点で全体を見渡し、「しくみ」や「意味」を組み立てるエリア。分析・学び・戦略づくりで、本質をとらえていく領域です。",

      "WATER｜絆を育てる領域":
        "人の心や関係性に水をそそぎ、ゆっくりと絆を育てていくエリア。共感・サポート・チームワークを通して、安心できるつながりをつくる領域です。"
    };

    // 色設定（EARTH=紫, FIRE=オレンジ, AIR=緑, WATER=水色）
    const domainColors = {
      "EARTH｜形にする領域": "#8B5CF6",
      "FIRE｜人と場を動かす領域": "#F97316",
      "AIR｜しくみを組む領域":   "#22C55E",
      "WATER｜絆を育てる領域":   "#38BDF8"
    };

    const elementDisplayNames = {
      EARTH: "EARTH｜形にする領域",
      FIRE:  "FIRE｜人と場を動かす領域",
      AIR:   "AIR｜しくみを組む領域",
      WATER: "WATER｜絆を育てる領域"
    };

    const starElementLabels = {
      FIRE:  "FIRE（火）エレメント",
      EARTH: "EARTH（土）エレメント",
      AIR:   "AIR（風）エレメント",
      WATER: "WATER（水）エレメント"
    };

    // 8軸の短い説明（一覧用）
    const axisDescriptions = {
      X1: "やることを整理し、流れや手順を組み立てる力。段取り・仕組み化・土台づくりが得意な軸です。",
      X2: "決めたことを粘り強くやり切る力。コツコツ続ける・最後まで終わらせるところで力を発揮する軸です。",
      I1: "言葉や存在感で場を明るくする力。前に出て話したり、雰囲気をあたためたりする軸です。",
      I2: "人を納得させ、巻き込みながら前に進める力。推進役・まとめ役として働く軸です。",
      T1: "情報や出来事を整理し、構造化して考える力。ロジカルに分析して判断する軸です。",
      T2: "深く学び、探究し続ける力。知識や経験を蓄えて、自分なりに理解を深めていく軸です。",
      R1: "人の気持ちに気づき、そっと寄りそう力。1対1の信頼関係やケアで力を発揮する軸です。",
      R2: "人と一緒に進め、チームとしてうまく回す力。調整・サポート・チームビルディングの軸です。"
    };

    // 8軸の詳しいフィードバック（さやちゃん仕様）
    const axisLongFeedback = {
      X1: "「大地のデザイン軸」は、全体の流れや手順を組み立てる力として表れます。やることを整理したり、タスクを並べ替えたり、「この順番で進めるとスムーズ」と直感的に組み立てたりする場面が多いはずです。頭の中で段取りを組みながら動くので、周りから見ると「準備が抜かりない人」「安心して任せられる人」と映りやすい才能です。プロジェクトの設計や、物事の進め方を整える役割で力を発揮しやすい軸と言えます。",
      X2: "「大地の実行軸」は、一度決めたことを最後までやり切る力として表れます。途中で止まっているタスクがあると落ち着かなかったり、「どうせやるならちゃんと終わらせたい」と感じることが多いかもしれません。周りが飽きてきたころにもコツコツと積み上げを続けられるので、長期プロジェクトや裏側で質を守る役割で信頼されやすい才能です。「続ける」「完了させる」という動きそのものが、あなたならではの強みになっている軸です。",
      I1: "「火の発信軸」は、言葉や表情、雰囲気そのものを使って場に火を灯す力として表れます。沈んだ空気を変えたり、「こんなことやろうよ」と話題を投げかけたり、気づけば場の温度を上げている場面が多いはずです。完璧なスピーチでなくても、日常の一言やSNSの投稿など、ライトな発信でも周りに影響を与えやすいタイプです。あなたの等身大の言葉が、誰かの心に小さな火を灯している軸です。",
      I2: "「火の推進軸」は、人や場を巻き込んで前に進めていく力です。状況を見ながら「じゃあ、こうしてみよう」「とりあえずここまで進めてみよう」と流れをつくることができるので、気づくとプロジェクトの舵取り役になっていることも多いタイプです。あなたの中のワクワクや「これ、絶対おもしろい」が点火すると、その火は周りにも伝染していきます。背中を押してほしい人たちの、心強い推進力になっている軸です。",
      T1: "「風の分析軸」は、物事を感覚だけで捉えるのではなく、「なぜそうなるのか」「他にどんな選択肢があるのか」を考える力として表れます。情報や出来事を整理し、因果関係やパターンを見抜くことが得意で、複雑な状況をシンプルに捉え直すことができます。感情に流されにくいため、周囲の暴走を止めたり、リスクに早めに気づいたりする役割も担いやすいタイプです。「よく考える」「冷静に見ている」視点そのものが強みになっている軸です。",
      T2: "「風の探究軸」は、興味を持ったテーマをどこまでも深く追いかける力として働きます。「なぜ？」「どうしてそうなるの？」と考え始めると、自分でも止まらないと感じることがあるかもしれません。本や講座、実体験などを通してインプットしたものを、自分なりの言葉やノートで整理していくことが多く、その分野では自然と周りより詳しくなっていきます。知ること・理解が深まること自体を楽しめる軸です。",
      R1: "「水の共感軸」は、人の表情や声のトーン、ちょっとした沈黙の変化に敏感に気づく力として表れます。相手の内側で起きていることに耳を澄ましながら話を聴くので、「ちゃんとわかってくれる人」と感じてもらいやすいタイプです。アドバイスをする前に、まず受け止めることができるため、1対1の関係性の中で信頼を育てやすい才能を持っています。寄りそうことそのものが、あなたのギフトになっている軸です。",
      R2: "「水のチーム軸」は、「みんなが気持ちよく動ける空気」をつくる力として表れます。関係性全体のバランスを見ながら、自然にフォローや調整に回ることが多く、場がギスギスしているときに柔らかい一言を差し込んだり、裏側でサポート役に回ったりすることで、チーム全体のパフォーマンスを底上げしていきます。あたり前のようにやっている調整や声かけが、実は大きな価値になっている軸です。"
    };

    // 上位3軸の掛け合わせフィードバック全パターン
    const comboMessages = {
      "I1-I2-R1": "あなたの今のメインの才能は「火の発信軸」「火の推進軸」「水の共感軸」の3つです。相手の気持ちを感じ取りながら、それでも一歩踏み出したい人の背中に、あたたかい言葉と行動で火を灯す人です。ガツガツした押しではなく、「あなたのペースで大丈夫だよ。でも一緒にやってみよう」と寄りそいながら進めるスタイルが魅力の組み合わせです。",
      "I1-I2-R2": "あなたの今のメインの才能は「火の発信軸」「火の推進軸」「水のチーム軸」の3つです。場を盛り上げつつ、みんなを巻き込み、チームとして前進させていくムードメーカーリーダータイプです。楽しい空気づくりと、実際にプロジェクトを動かす推進力の両方があるため、イベントやコミュニティ、チーム活動などで中心人物になりやすい組み合わせです。",
      "I1-I2-T1": "あなたの今のメインの才能は「火の発信軸」「火の推進軸」「風の分析軸」の3つです。場を明るくしながら方向性を示し、その背景をロジカルに説明できる発信リーダータイプです。感覚だけではなく、「なぜそれをやるのか」「他の選択肢と何が違うのか」を整理して伝えられるため、人の納得感と行動を同時に引き出せる組み合わせです。",
      "I1-I2-T2": "あなたの今のメインの才能は「火の発信軸」「火の推進軸」「風の探究軸」の3つです。自分が学んでおもしろかったことを、ワクワク感そのままに発信し、「一緒にやってみよう」と場を動かしていくタイプです。知的好奇心と行動力と発信力がセットになっているため、「学びを広める人」「新しい流れをつくる人」として影響力を発揮しやすい組み合わせです。",
      "I1-R1-R2": "あなたの今のメインの才能は「火の発信軸」「水の共感軸」「水のチーム軸」の3つです。人の気持ちに寄りそいながら、場をあたためる言葉を投げかけ、関係性全体もやわらかく整えていく人です。安心感のある発信を通じて、「ここにいていいんだ」と感じられる場づくりができるため、コミュニティやグループの雰囲気づくりで大きな役割を担う組み合わせです。",
      "I1-T1-R1": "あなたの今のメインの才能は「火の発信軸」「風の分析軸」「水の共感軸」の3つです。相手の気持ちを受けとめながら、その状況を整理して言葉にし、あたたかく発信できるタイプです。「気持ちもわかるし、状況も冷静に見てくれる人」として、相談ごとの共有や心の整理をサポートする場で活きる組み合わせです。",
      "I1-T1-R2": "あなたの今のメインの才能は「火の発信軸」「風の分析軸」「水のチーム軸」の3つです。チームの状況や課題を言語化し、それをみんなにわかりやすく共有しながら、場の雰囲気も明るくしていける人です。問題提起だけでなく、チームとしての次の一歩を議論しやすいように場を整えられるため、組織内のコミュニケーション役として頼られる組み合わせです。",
      "I1-T1-T2": "あなたの今のメインの才能は「火の発信軸」「風の分析軸」「風の探究軸」の3つです。興味を持ったテーマを深く学び、ロジカルに整理したうえで、自分の言葉でわかりやすく発信できる人です。感覚的なノリではなく、「ちゃんと考えた内容」を楽しく伝えられるため、学び系・解説系の発信で大きな力を発揮する組み合わせです。",
      "I1-T2-R1": "あなたの今のメインの才能は「火の発信軸」「風の探究軸」「水の共感軸」の3つです。深く学んだことを、自分の体験や感情も交えながら、あたたかい言葉で発信できる人です。知識と共感の両方を届けられるため、「心に響く学び」「生き方に関わる発信」と相性がよく、人の内側にじんわり変化を起こす組み合わせです。",
      "I1-T2-R2": "あなたの今のメインの才能は「火の発信軸」「風の探究軸」「水のチーム軸」の3つです。学びやアイデアをチームに持ち込み、みんなで共有しながら、場の一体感を高めていくタイプです。情報だけでなく「一緒にやってみよう」という空気も同時につくれるため、コミュニティ運営や学びの場づくりなどで力を発揮する組み合わせです。",
      "I2-R1-R2": "あなたの今のメインの才能は「火の推進軸」「水の共感軸」「水のチーム軸」の3つです。メンバー一人ひとりの気持ちに耳を傾けつつ、「でも一緒にここまで行こう」とチーム全体を前向きに動かしていく人です。優しさと前進力の両方を持ち合わせているため、雰囲気を壊さずに変化を起こしていけるリーダーとして力を発揮する組み合わせです。",
      "I2-T1-R1": "あなたの今のメインの才能は「火の推進軸」「風の分析軸」「水の共感軸」の3つです。人の気持ちをくみ取りながら課題を整理し、それでも前に進みたい人たちにとってちょうどいい次の一歩を提示できる人です。押しつけではなく、「こういう進め方ならできそう」と思える提案ができるため、変化の場面のファシリテーターとして活きる組み合わせです。",
      "I2-T1-R2": "あなたの今のメインの才能は「火の推進軸」「風の分析軸」「水のチーム軸」の3つです。チームの状況を冷静に見ながら、必要な話し合いをリードし、「じゃあこういう役割分担で進めよう」と場を前に動かしていくタイプです。論理とチームワークの両方を重視しながら推進できるため、組織変革やプロジェクト運営で力を発揮しやすい組み合わせです。",
      "I2-T1-T2": "あなたの今のメインの才能は「火の推進軸」「風の分析軸」「風の探究軸」の3つです。深く学び、整理した内容をもとに、「だからこうしよう」と方向性を示し、実際に動かしていく知的リーダータイプです。理屈だけで終わらず実行までセットで進められるため、専門性の高いプロジェクトや企画の推進役として力を発揮する組み合わせです。",
      "I2-T2-R1": "あなたの今のメインの才能は「火の推進軸」「風の探究軸」「水の共感軸」の3つです。学びや気づきをもとに方向性を示しつつ、関わる人の気持ちにも寄りそうことができる人です。「ただ変えよう」とするのではなく、「この人たちにとって無理のない変化はどこか」を探りながら、少しずつ前進させていく変化の伴走者タイプの組み合わせです。",
      "I2-T2-R2": "あなたの今のメインの才能は「火の推進軸」「風の探究軸」「水のチーム軸」の3つです。新しい知恵やアイデアをチームに持ち込み、「みんなで試してみよう」と場を巻き込みながら実行していくタイプです。学びと推進とチームワークがセットになっているため、学習する組織づくりや、新しい取り組みをチームで根づかせていく場面で活きる組み合わせです。",
      "R1-R2-T1": "あなたの今のメインの才能は「水の共感軸」「水のチーム軸」「風の分析軸」の3つです。人の気持ちと関係性を大切にしながら、その場で起きていることを冷静に整理し、みんなが動きやすい状態に整えていく人です。感情的な対立やモヤモヤを言語化し、対話を通じて解きほぐしていけるため、場の調整役・ファシリテーターとして信頼される組み合わせです。",
      "R1-R2-T2": "あなたの今のメインの才能は「水の共感軸」「水のチーム軸」「風の探究軸」の3つです。深く学んだことや気づきを、人の気持ちとチームの状況に合わせて共有し、みんなで活かせる形にしていく人です。知識とやさしさを両方持っているからこそ、「学び合う安心感のある場」や「成長し続けるチームづくり」に貢献しやすい組み合わせです。",
      "R1-T1-T2": "あなたの今のメインの才能は「水の共感軸」「風の分析軸」「風の探究軸」の3つです。深く学びながら本質を整理し、その人の背景や気持ちに合わせて言葉を選べる人です。専門的な内容でも、相手に寄りそった説明や提案ができるため、「わかりやすいのに、ちゃんと気持ちも大事にしてくれる」と感じてもらいやすい組み合わせです。",
      "T1-T2-X1": "あなたの今のメインの才能は「風の分析軸」「風の探究軸」「大地のデザイン軸」の3つです。情報を集めて深く学び、本質を整理し、現実的なフローに落とし込むことができる知的実務家タイプです。感覚だけでなく構造から理解したうえで計画を描くため、仕組みづくりやコンテンツ設計、マニュアル化などで特に力を発揮する組み合わせです。",
      "R1-T1-X1": "あなたの今のメインの才能は「水の共感軸」「風の分析軸」「大地のデザイン軸」の3つです。人の気持ちを大事にしながらも、状況を冷静に整理し、「どう進めるのが一番よさそうか」を落ち着いて考えられる人です。感情とロジック、その両方を扱えるため、相談を受けたときに「共感しつつ具体的な打ち手も出す」ことができる頼れる存在になりやすい組み合わせです。",
      "R2-T1-X1": "あなたの今のメインの才能は「水のチーム軸」「風の分析軸」「大地のデザイン軸」の3つです。チームの状況や課題を整理し、流れを設計しながら、メンバーそれぞれが動きやすいように関係性も整えていくタイプです。表には出にくい「詰まり」を見抜き、プロセスとコミュニケーションの両面から解消していけるため、チーム運営や組織改善の場で力を発揮する組み合わせです。",
      "T2-X1-X2": "あなたの今のメインの才能は「風の探究軸」「大地のデザイン軸」「大地の実行軸」の3つです。学んだこと・調べたことをもとに計画を描き、コツコツ実行していく探究型の実務派タイプです。インプットだけで終わらず、「せっかく学んだことを形にしたい」という感覚が強いため、勉強会や講座、本の内容を自分なりの仕組みやコンテンツに落とし込む動きで、才能がもっとも活きやすい組み合わせです。",
      "R1-T2-X1": "あなたの今のメインの才能は「水の共感軸」「風の探究軸」「大地のデザイン軸」の3つです。深く学んだことを、相手の気持ちに寄りそいながら、現実のステップに落とし込める人です。知識だけを押しつけるのではなく、「この人にとってちょうどいいペースと方法は何だろう？」と考えて伴走できるため、教育・コーチング・メンタリングなどで特に生きる組み合わせです。",
      "R2-T2-X1": "あなたの今のメインの才能は「水のチーム軸」「風の探究軸」「大地のデザイン軸」の3つです。学んだことをもとにチームのやり方をアップデートし、みんなで取り組める形に翻訳していくタイプです。新しい知識を現場の言葉に変換しながら、「じゃあ誰が・どう動く？」まで設計できるので、研修後のフォローや組織内の改善プロジェクトなどで力を発揮しやすい組み合わせです。",
      "R1-R2-X1": "あなたの今のメインの才能は「水の共感軸」「水のチーム軸」「大地のデザイン軸」の3つです。人の気持ちや関係性を大切にしながら、「みんなが無理なく動ける流れ」をつくる人です。誰か一人に負担が集中しないように配慮したり、雰囲気がギスギスしないような進め方を整えたりと、場の安心感と実務の両方を支える、あたたかい進行役になりやすい組み合わせです。",
      "T1-X1-X2": "あなたの今のメインの才能は「風の分析軸」「大地のデザイン軸」「大地の実行軸」の3つです。論理的に物事を整理し、手順に落とし込み、最後までやり切る力を併せ持った人です。感覚だけで動くのではなく、「なぜその順番なのか」「どこにリスクがあるか」を考えながら、現実的で抜け漏れの少ない進め方を選べるため、品質の高い成果を安定して出しやすい組み合わせです。",
      "I1-X1-X2": "あなたの今のメインの才能は「火の発信軸」「大地のデザイン軸」「大地の実行軸」の3つです。全体の流れを組み立てつつ、最後までやり切る力があり、その様子をオープンに発信できる人です。計画だけ・作業だけで完結せず、「こうやって進めてるよ」とプロセスごと見せていくことで、周りの人の安心感ややる気も一緒に引き出していくスタイルが光ります。",
      "I2-X1-X2": "あなたの今のメインの才能は「火の推進軸」「大地のデザイン軸」「大地の実行軸」の3つです。段取りを描き、コツコツ実行しながら、必要な場面で「じゃあ、こうしよう」と方向性を示せるタイプです。思いつきではなく、しっかり考えた計画をもとに人を巻き込めるので、チームやプロジェクトの「実行責任者」「現場リーダー」として頼られやすい組み合わせです。",
      "X1-X2-R1": "あなたの今のメインの才能は「大地のデザイン軸」「大地の実行軸」「水の共感軸」の3つです。人の気持ちに配慮しながら段取りを組み、無理のないペースでやり切る力を持った、やさしい実務家タイプです。「この人はいまどんな状態か」を感じ取りつつタスクや優先順位を決められるので、関わる人がバテにくい進め方ができるのが大きな強みです。",
      "X1-X2-R2": "あなたの今のメインの才能は「大地のデザイン軸」「大地の実行軸」「水のチーム軸」の3つです。全体の流れを見渡しながら、チーム全員が動きやすいように役割を配置し、自分も着実に動いていけるタイプです。自分一人で完結させるのではなく、「誰と一緒にどう進めるとスムーズか」を考えられるため、プロジェクトの司令塔や現場リーダーとして、安心感のある進行役になれる組み合わせです.",
      "I1-X1-T1": "あなたの今のメインの才能は「火の発信軸」「大地のデザイン軸」「風の分析軸」の3つです。ロジカルに物事を整理し、それをわかりやすい流れに組み立ててから発信できる人です。伝えたいことを感覚だけで話すのではなく、相手の理解プロセスをイメージして順番を設計できるので、講座・プレゼン・解説コンテンツなどで、「整理された伝え方」の才能が光る組み合わせです。",
      "I1-X1-T2": "あなたの今のメインの才能は「火の発信軸」「大地のデザイン軸」「風の探究軸」の3つです。学んだこと・探究したことを、ストーリーのように流れをつくって発信できるタイプです。理論や知識をただ詰め込むのではなく、「どんな順番で話すと相手に届きやすいか」を考えながら構成できるので、教育系コンテンツやナレッジ共有の場で力を発揮しやすい組み合わせです。",
      "I1-R1-X1": "あなたの今のメインの才能は「火の発信軸」「水の共感軸」「大地のデザイン軸」の3つです。相手の気持ちに寄りそいながら、場の流れを整え、自分の言葉であたたかく発信できる人です。「何を伝えるか」だけでなく「どう伝えると相手が安心できるか」を自然に考えられるため、セッション・カウンセリング・コミュニティ運営など、人の心に触れる場で特に力を発揮する組み合わせです。",
      "I1-R2-X1": "あなたの今のメインの才能は「火の発信軸」「水のチーム軸」「大地のデザイン軸」の3つです。チーム全体の流れをつくりながら、場を明るくし、みんながついてきやすいように声をかけていくタイプです。プロセス設計とムードづくりの両方ができるので、プロジェクトの進行役・場づくり役として、チームの「空気」と「成果」を同時に整えていける組み合わせです。",
      "I1-T1-X2": "あなたの今のメインの才能は「火の発信軸」「風の分析軸」「大地の実行軸」の3つです。筋の通った考えをわかりやすく発信し、その内容を自らコツコツ実践していける人です。言うだけでなく「ちゃんとやっている人」として信頼されやすく、その実行力と説明力のセットが、周囲の行動変化を促していく組み合わせです。",
      "I1-T2-X2": "あなたの今のメインの才能は「火の発信軸」「風の探究軸」「大地の実行軸」の3つです。学んだこと・経験したことを、自分なりに消化してから発信し、それを実際の行動にもつなげていくタイプです。インプットとアウトプットと実践のループを回しやすく、その姿が「学びながら進んでいくロールモデル」として周りの人にも良い影響を与える組み合わせです。",
      "I1-R1-X2": "あなたの今のメインの才能は「火の発信軸」「水の共感軸」「大地の実行軸」の3つです。人の気持ちに寄りそいながら、率直な言葉で励まし、自分も一緒に動いていける人です。「大丈夫、一緒にやってみよう」と言ってくれる存在として、誰かの一歩目を支える応援者になりやすい組み合わせです。",
      "I1-R2-X2": "あなたの今のメインの才能は「火の発信軸」「水のチーム軸」「大地の実行軸」の3つです。チームの雰囲気を明るくしつつ、メンバーと一緒に手を動かし、着実に前進させていくタイプです。声かけと行動の両方で場を支えることができるため、現場リーダーやプロジェクトのムードメーカーとして重宝される組み合わせです。",
      "I2-T1-X1": "あなたの今のメインの才能は「火の推進軸」「風の分析軸」「大地のデザイン軸」の3つです。状況をロジカルに整理し、筋の通った進め方を描きながら、「じゃあこうしよう」と前に出て方向性を示せるタイプです。感情論だけではなく具体的な根拠や段取りもセットで提示できるので、納得感のあるリーダーシップを発揮しやすい組み合わせです。",
      "I2-T2-X1": "あなたの今のメインの才能は「火の推進軸」「風の探究軸」「大地のデザイン軸」の3つです。学びや情報をもとに「こういう形で進めると良さそう」と道筋を描き、人を巻き込みながら実際に動かしていける人です。知的好奇心と行動力のバランスがよく、「調べて終わり」でも「勢いだけ」でもない、実験的なプロジェクトを形にしやすい組み合わせです。",
      "I2-R1-X1": "あなたの今のメインの才能は「火の推進軸」「水の共感軸」「大地のデザイン軸」の3つです。メンバーの気持ちに目を配りながら、「でも一緒にここを目指そう」と前に進めていくリーダータイプです。無理やり引っ張るのではなく、一人ひとりの感情に寄りそいながら、現実的なステップを提示できるため、安心してついていける進行役として信頼されやすい組み合わせです。",
      "I2-R2-X1": "あなたの今のメインの才能は「火の推進軸」「水のチーム軸」「大地のデザイン軸」の3つです。チームの動き方を設計し、「じゃあこの役割はこの人に」と配置しながら、場を前向きに動かしていくタイプです。人と人とのつながりを意識しつつ、実際のタスクも進めていけるため、プロジェクトの立ち上げや組織づくりなど、チームで何かを始める場面で活きやすい組み合わせです。",
      "I2-T1-X2": "あなたの今のメインの才能は「火の推進軸」「風の分析軸」「大地の実行軸」の3つです。状況を分析して筋道を立て、その方向へ自ら動きながら人も巻き込んでいく実務リーダータイプです。「なぜそれをやるのか」を説明しつつ、具体的な行動まで落としていけるので、納得感のある推進役として信頼されやすい組み合わせです。",
      "I2-T2-X2": "あなたの今のメインの才能は「火の推進軸」「風の探究軸」「大地の実行軸」の3つです。新しい知識やアイデアを仕入れ、「とりあえずやってみよう」と試しながら、やり方をアップデートしていく実験型の推進力を持つ人です。トライ＆エラーを通して道を切り開いていくため、変化の多い環境や、新しいサービス・企画の立ち上げで特に力を発揮しやすい組み合わせです。",
      "I2-R1-X2": "あなたの今のメインの才能は「火の推進軸」「水の共感軸」「大地の実行軸」の3つです。周りの感情の動きを感じ取りつつ、「でも一緒にここまで進もう」と現実的な一歩を提示できる人です。無理なスピードで引っ張るのではなく、相手の気持ちに合わせたペースで着実に進行できるため、安心感のあるリーダー・伴走者として頼られる組み合わせです。",
      "I2-R2-X2": "あなたの今のメインの才能は「火の推進軸」「水のチーム軸」「大地の実行軸」の3つです。チームでのゴール達成に向けて方向性を示し、自らも動きながら、メンバーそれぞれの動きも整えていけるタイプです。結果だけでなくプロセスや人間関係も大切にしつつ、プロジェクトを完了まで持っていく「現場のキャプテン」のような存在になりやすい組み合わせです。",
      "T1-T2-X2": "あなたの今のメインの才能は「風の分析軸」「風の探究軸」「大地の実行軸」の3つです。深く学び、構造を理解し、それを実際の行動に落とし込んでいく知的行動派タイプです。「わかったつもり」で終わるのではなく、検証や実践までセットで取り組めるため、専門性を身につけて成果に変えていくプロフェッショナルとして力を発揮する組み合わせです。",
      "R1-T1-X2": "あなたの今のメインの才能は「水の共感軸」「風の分析軸」「大地の実行軸」の3つです。状況や課題を冷静に整理しながら、人の気持ちも丁寧にくみ取り、現実的な打ち手に落とし込める人です。感情だけ・論理だけに偏らず、「心も現実も大事にしたい」人たちの間で、調整役・アドバイザーとして頼りにされる組み合わせです。",
      "R2-T1-X2": "あなたの今のメインの才能は「水のチーム軸」「風の分析軸」「大地の実行軸」の3つです。チームの課題を整理し、具体的なタスクに落とし込み、実際に動きながら関係性も整えていけるタイプです。目に見える問題と、目に見えにくい人間関係の両方に気づき、現場レベルで改善を進めていく「調整と実行のプロ」として力を発揮する組み合わせです。",
      "R1-T2-X2": "あなたの今のメインの才能は「水の共感軸」「風の探究軸」「大地の実行軸」の3つです。学んだことを相手の状況や気持ちに合わせてアレンジし、具体的な行動に落とし込んで一緒に進めていける人です。知識を伝えるだけでなく、「この人にはこの順番・このやり方」と個別にチューニングできるため、伴走型のコーチ・講師として才能が活きる組み合わせです。",
      "R2-T2-X2": "あなたの今のメインの才能は「水のチーム軸」「風の探究軸」「大地の実行軸」の3つです。新しい知識をチームに持ち込み、それをみんなで試せる形に落とし込んで、実際の現場で一緒にやり切っていくタイプです。学びを組織全体の「習慣」や「仕組み」に変えていく動きで、長期的な変化をつくっていける組み合わせです。",
      "R1-R2-X2": "あなたの今のメインの才能は「水の共感軸」「水のチーム軸」「大地の実行軸」の3つです。人の気持ちや関係性を大切にしながら、自分もコツコツ動いて場を支えていける人です。表に立つより、現場のケアと実務を同時に引き受けることで、チーム全体が安心して動ける土台をつくっていく、縁の下の力持ち的な組み合わせです。",
      "I1-I2-X1": "あなたの今のメインの才能は「火の発信軸」「火の推進軸」「大地のデザイン軸」の3つです。アイデアを勢いで終わらせず、プロセスを描きながら人前で発信し、場を前に進めていくタイプです。雰囲気だけで煽るのではなく、「じゃあこういう手順でやってみよう」と現実的な道筋も同時に見せられるので、人を自然と巻き込みながらプロジェクトをスタートさせる力が際立つ組み合わせです."
    };

    // デフォルトの3軸メッセージ（comboMessagesにないとき用）
    function buildDefaultTop3Message(top3) {
      if (!top3 || top3.length === 0) return "";
      const names = top3.map(a => a.label);
      return `あなたの今のメインの才能は「${names.join("」「")}」の3つです。これは、あなたが無意識に使っている才能であり、「頑張らなくても自然と活用できる」領域でもあります。この3つは、それぞれ単体でも力を持っていますが、同時に働くことであなたならではのリズムとスタイルをつくります。日常の中で「しっくりくる動き方」や「つい引き受けがちな役割」を思い出してみると、そこには必ずこの3つの軸のエッセンスが重なっています。`;
    }

    // ---- 12星座 ----
    const zodiacInfos = {
      ARIES:   { id:"ARIES",   name:"牡羊座", element:"FIRE",  description:"スタートダッシュ・チャレンジ精神・率直さがテーマになりやすい星座です。" },
      TAURUS:  { id:"TAURUS",  name:"牡牛座", element:"EARTH", description:"五感の心地よさや安定感、マイペースさを大切にする星座です。" },
      GEMINI:  { id:"GEMINI",  name:"双子座", element:"AIR",   description:"好奇心旺盛で、情報や会話を通じて世界を広げていく星座です。" },
      CANCER:  { id:"CANCER",  name:"蟹座",   element:"WATER", description:"身近な人や居場所を守り、あたたかい関係性を育てる星座です。" },
      LEO:     { id:"LEO",     name:"獅子座", element:"FIRE",  description:"自己表現やドラマチックさを通して、周りを照らしていく星座です。" },
      VIRGO:   { id:"VIRGO",   name:"乙女座", element:"EARTH", description:"細やかな気配りと実務力で、現場を整えることに長けた星座です。" },
      LIBRA:   { id:"LIBRA",   name:"天秤座", element:"AIR",   description:"バランス感覚と対話力で、人と人の間をつないでいく星座です。" },
      SCORPIO: { id:"SCORPIO", name:"蠍座",   element:"WATER", description:"物事や人と深く向き合い、本質に迫っていく力を持つ星座です。" },
      SAGITTARIUS:{id:"SAGITTARIUS",name:"射手座",element:"FIRE",description:"自由な探究心とスケールの大きなビジョンで、世界を広げていく星座です。"},
      CAPRICORN:{ id:"CAPRICORN",name:"山羊座", element:"EARTH",description:"目的達成に向けて、長期的にコツコツ積み上げていく星座です。" },
      AQUARIUS:{ id:"AQUARIUS", name:"水瓶座", element:"AIR",   description:"既存の枠にとらわれず、新しい価値観やつながりを生み出す星座です。" },
      PISCES:  { id:"PISCES",  name:"魚座",   element:"WATER", description:"感受性が豊かで、境界を超えて共感し、癒しをもたらす星座です。" }
    };

    function getZodiacFromBirthdate(dateStr) {
      if (!dateStr) return null;
      const parts = dateStr.split("-");
      if (parts.length < 3) return null;
      const month = parseInt(parts[1], 10);
      const day   = parseInt(parts[2], 10);
      if (!month || !day) return null;

      if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return zodiacInfos.ARIES;
      if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return zodiacInfos.TAURUS;
      if ((month === 5 && day >= 21) || (month === 6 && day <= 21)) return zodiacInfos.GEMINI;
      if ((month === 6 && day >= 22) || (month === 7 && day <= 22)) return zodiacInfos.CANCER;
      if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return zodiacInfos.LEO;
      if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return zodiacInfos.VIRGO;
      if ((month === 9 && day >= 23) || (month === 10 && day <= 23)) return zodiacInfos.LIBRA;
      if ((month === 10 && day >= 24) || (month === 11 && day <= 22)) return zodiacInfos.SCORPIO;
      if ((month === 11 && day >= 23) || (month === 12 && day <= 21)) return zodiacInfos.SAGITTARIUS;
      if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return zodiacInfos.CAPRICORN;
      if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return zodiacInfos.AQUARIUS;
      if ((month === 2 && day >= 19) || (month === 3 && day <= 20)) return zodiacInfos.PISCES;
      return null;
    }

    function getElementKeyFromDomainName(domainName) {
      if (!domainName) return null;
      if (domainName.startsWith("EARTH")) return "EARTH";
      if (domainName.startsWith("FIRE"))  return "FIRE";
      if (domainName.startsWith("AIR"))   return "AIR";
      if (domainName.startsWith("WATER")) return "WATER";
      return null;
    }

    // 星×才能 16タイプ（長文つき）
    const talentStarTypes = {
      "EARTH-EARTH": {
        title: "畑を耕す実行派タイプ",
        oneLine: "コツコツ土台をつくって、確実に結果を出していく人。",
        longText: `才能エレメントも星エレメントもEARTHに寄っているあなたは、「地に足のついた現実派」の色がとても濃いタイプです。思いつきをそのまま流すのではなく、「本当に必要か？」「どうやって形にするか？」を自然と考えながら動いていることが多いはず。周りが熱に任せて動きすぎているときも、具体的な段取りや優先順位を落ち着いて整えていけるので、現場に安心感と安定感をもたらす存在になりやすいです。
また、少し時間はかかっても、一度「やる」と決めたことを粘り強く続けていく力があります。目立つパフォーマンスよりも、毎日の小さな積み重ねや、裏側で環境を整える仕事のほうが、あなたの本領を発揮しやすいフィールド。畑を耕し、土を整え、種をまき、芽が出るまで見守るように、人やプロジェクトを「育てていく」動きが、あなたならではの才能として息づいています。`
      },
      "EARTH-FIRE": {
        title: "情熱を形にする実行タイプ",
        oneLine: "「これやりたい！」という火を、ちゃんと行動と成果につなげる人。",
        longText: `才能エレメントはEARTH、星エレメントはFIREのあなたは、「ひらめきや情熱を、ちゃんと現実の形にしていく人」です。心の中では「これやってみたい！」「もっと面白くしたい！」という火がしっかり燃えているのに、それを勢いだけでは終わらせず、実行可能なプランに落とし込むことができます。
周りにアイデアマンや感情豊かな人が多い場でも、「じゃあ、まずはここからやってみない？」「この順番で進めると実現しやすそうだよ」と、熱を冷まさずに前に進める役割を担いやすいタイプです。自分の情熱も、誰かの情熱も、地に足のついた行動につなげられるので、気づけば「夢を現実にする人」「ちゃんと結果を出す人」として見られやすくなります。火の勢いと土の安定感、その両方を持っているからこそ、無理しすぎず、でも確実に前に進んでいけるスタイルが、あなたの大きな強みです。`
      },
      "EARTH-AIR": {
        title: "設計図から形にする実行タイプ",
        oneLine: "頭の中のプランや構造を、そのまま現実の仕組みに落としていく人。",
        longText: `才能エレメントEARTHと星エレメントAIRを持つあなたは、「考えたことを構造化し、それを実際のしくみやプロセスに落とし込む力」を備えたタイプです。頭の中でアイデアや情報を組み立てながら、「じゃあ、現場ではどう動く？」「誰が何を担当するとスムーズ？」と、自然に実行レベルまでイメージしていきます。
会話や情報交換の中からポイントを抜き出し、現実的なタスクやフローに翻訳できるので、企画と実行の橋渡し役になりやすい人です。抽象度の高い話だけで終わらせず、「いつ・どこで・誰が・どうする」を具体化することが、あなたにとってはそれほど苦ではありません。アイデア先行のチームに居るときほど、あなたの「地に足のついた設計力」が頼りにされます。考える力と、形にする力。その間を行き来できるのが、あなたならではの才能です。`
      },
      "EARTH-WATER": {
        title: "思いやりで現場を整える実行タイプ",
        oneLine: "人の気持ちをくみとりながら、無理のない形で物事を進めていく人。",
        longText: `才能エレメントEARTH、星エレメントWATERのあなたは、「人の気持ちに配慮しながら、無理のない形で物事を進めていく人」です。期限やタスクだけを見るのではなく、「今、この人はどんな状態かな」「ここでこれを頼んだら負担にならないかな」と、相手のコンディションを感じ取りながら段取りを組んでいきます。
その結果、表向きは目立たなくても、チームや家族が安心して動ける基盤づくりを自然に担っていることが多いタイプです。効率だけを優先するやり方とは少し違い、「ちゃんと終わる」「ちゃんと守られる」ラインを感覚的につかみながら、ちょうどいい形に整えていくセンスがあります。誰かが無理していそうなとき、関係性がピリつきそうなときほど、あなたの丁寧な実行力とケアの感覚が、じわじわと場を支えています。`
      },
      "FIRE-EARTH": {
        title: "地に足ついたリーダータイプ",
        oneLine: "現実感のある一言で、みんなをぐいっと前に進めるリーダー。",
        longText: `才能エレメントFIRE、星エレメントEARTHのあなたは、「場を動かすリーダーシップ」と「現実的な判断力」を両方持ったタイプです。人前に立って話したり、方向性を示したりすることに、ある程度自然体で取り組める一方で、「盛り上がるだけでは終わらせたくない」という感覚も同時に働いています。
そのため、思いつきの号令ではなく、「この状況なら、今はここまで」「このリソースなら、まずはこれから」と、地に足のついた動かし方がしやすい人です。周りから見ると、「テンションと現実感のバランスがいい人」「ついていきやすいリーダー」として映りやすいでしょう。必要なときには場の空気をグッと温めつつ、冷静さも失わないこのスタイルは、人とプロジェクトの両方を守りながら前進させていく、大きな強みになっています。`
      },
      "FIRE-FIRE": {
        title: "場を燃やすムードメーカータイプ",
        oneLine: "いるだけで場の温度が上がる、盛り上げ役＆火付け役。",
        longText: `才能も星もFIREに偏っているあなたは、「いるだけで場の温度を上げる人」です。おもしろそうと思ったことに素早く反応し、やりたい気持ちがスイッチオンになると、身体も言葉も一気に前向きモードに入っていきます。その勢いは、周りの人の心にも自然と伝染し、「あなたがいると活気が出る」「つい巻き込まれて動きたくなる」と感じてもらいやすいタイプです。
考えすぎて動けなくなるよりも、まず一歩踏み出してみる中で学んでいくスタイルがしっくりきやすいので、「やってみよう」の火種をつくる役にまわることが多いかもしれません。もちろん、燃えすぎて疲れることもあるかもしれないけれど、あなたの火があるからこそ動き出す企画や、救われる人もたくさんいます。情熱・勢い・楽しさ。その火花が、あなたの才能の源になっています。`
      },
      "FIRE-AIR": {
        title: "言葉で火をつける発信タイプ",
        oneLine: "言葉やストーリーで、人の心に「やってみたい！」を灯す人。",
        longText: `才能エレメントFIRE、星エレメントAIRを持つあなたは、「言葉やストーリーを通して、人の心に火を灯す人」です。自分がワクワクしたものや感動したことを、誰かにシェアしたくなる気持ちが強く、その伝え方にも自然と工夫が入ります。「これ、めちゃくちゃ良かったんだよ！」と、ストレートな熱量と軽やかな言語化の両方を使えるタイプです。
SNSや対話の場、プレゼンや講座など、「言葉＋熱」が組み合わさるシーンでは特に力を発揮しやすいでしょう。単に情報を説明するだけではなく、「それを聞いた人が、少し勇気を出して一歩踏み出したくなる」ようなエネルギーを、無意識に乗せやすい人です。好奇心と発信力、そして火の情熱。その掛け算があなたのギフトとして、周りに広がっていきます。`
      },
      "FIRE-WATER": {
        title: "心に火を灯す応援タイプ",
        oneLine: "相手の気持ちに寄りそいながら、「一歩出てみようよ」と背中を押す人。",
        longText: `才能エレメントFIRE、星エレメントWATERのあなたは、「人の心の奥に火を灯す応援者」です。相手の感情や背景に敏感で、「この人は今、どんな気持ちでここにいるんだろう」と想像しながら関わります。そのうえで、「大丈夫、やってみよう」「きっとあなたならできるよ」と、そっと背中を押す言葉や雰囲気を届けていくタイプです。
ガンガン前に出て引っ張るというより、相手のペースや繊細さを尊重しつつ、「でも本音では、こうなりたいんだよね？」と内側の火を拾い上げてあげるイメージ。寄り添いと情熱、どちらか一方ではなく、その両方をバランスよく扱えるからこそ、安心とチャレンジが同時に存在できる場をつくることができます。あなたの応援の一言が、人の人生のターニングポイントになることも少なくありません。`
      },
      "AIR-EARTH": {
        title: "現実を整える設計タイプ",
        oneLine: "混ざった状況を整理して、仕組みやルールに落とし込む人。",
        longText: `才能エレメントAIR、星エレメントEARTHのあなたは、「整理・分析」と「実務・現場感覚」が自然に組み合わさったタイプです。物事を一歩引いて俯瞰し、構造やパターンを見抜きながら、「だから実際にはこう動くのが良さそう」と現実レベルに落としていくことができます。
机上の空論で終わらせず、かと言って目の前のことだけに振り回されるわけでもない。その中間地点で、「ちゃんと意味がある」「ちゃんと回る」仕組みづくりができる人です。チームやプロジェクトの中では、計画の穴に気づいたり、誰も言語化していないモヤモヤを整理したりする力が発揮されやすいでしょう。静かに現場を整えながら、じわっと成果につながる仕組みを描いていく。そんな動き方が、あなたらしい才能として表れます。`
      },
      "AIR-FIRE": {
        title: "アイデアで場を動かす企画タイプ",
        oneLine: "おもしろい企画や工夫で、人や場をワクワクさせる人。",
        longText: `才能エレメントAIR、星エレメントFIREのあなたは、「ひらめきと企画力で、人と場をワクワクさせる人」です。ふとした瞬間にアイデアが浮かびやすく、「これとこれを組み合わせたら面白そう」「こういう切り口なら伝わりやすそう」と考えることが多いはず。
そこにFIREの勢いが重なることで、「ただ思いつくだけ」では終わらず、それを実際に企画やアクションに変えていきます。周りから見ると、「いつも新しいことを言い出す人」「話しているとワクワクしてくる人」と映りやすいタイプです。場がマンネリ化しているときほど、あなたの発想とチャレンジ精神が空気を変えていきます。遊び心と戦略性、その両方を持ち合わせているのが、あなたならではの強みです。`
      },
      "AIR-AIR": {
        title: "本質を読み解くナビゲータータイプ",
        oneLine: "情報の中からツボを見抜き、「結局ここが大事」と方向を示す人。",
        longText: `才能も星もAIRに寄っているあなたは、「情報と意味の世界」で遊べる人です。たくさんの情報や価値観が飛び交う中でも、どこかクールな視点で、「結局、ここが重要だよね」と本質を抜き出していく力があります。意見や選択肢が多すぎて混乱している場では、その整理と言語化の才能がとても頼りにされやすいタイプです。
また、固定観念に縛られず、「こういう考え方もおもしろくない？」と新しい視点を差し込むことができるので、人の思考や行動をふわっと自由にしていく役割も担いやすいでしょう。正解を一つに決めつけるのではなく、可能性のスペースを広げるナビゲーター。そんな立ち位置で、あなたの才能は自然に輝いていきます。`
      },
      "AIR-WATER": {
        title: "物語を聴き出すストーリー編集タイプ",
        oneLine: "相手の話の中から、その人らしい物語やメッセージを引き出す人。",
        longText: `才能エレメントAIR、星エレメントWATERのあなたは、「人の内側にある物語を、言葉としてすくい上げる人」です。相手の感情や背景に共感しながら話を聴きつつ、その中から「その人らしさ」や「大事なテーマ」を言葉にしていく力があります。
相談や対話の場では、ただアドバイスをするのではなく、「今までの経験を振り返ると、こんな流れがあるよね」「あなたにとってのキーワードは、ここかもしれない」と、相手のストーリーを一緒に編集していくような関わり方になりやすいタイプです。人の気持ちと情報を、どちらも丁寧に扱えるからこそ、「聴いてもらえる安心」と「前に進むヒント」の両方を届けることができます。`
      },
      "WATER-EARTH": {
        title: "現場をあたためるケアタイプ",
        oneLine: "チームや場のコンディションを見ながら、安心して動ける環境を整える人。",
        longText: `才能エレメントWATER、星エレメントEARTHのあなたは、「人の心と現実の両方をちゃんと見ている、現場の頼れるケア担当」のような存在です。場の空気やメンバーの心の状態に敏感で、「ちょっと疲れていそうだな」「ここは一言フォローが必要だな」と感じ取ることができます。
そこにEARTHの安定感が重なることで、ただ心配するだけで終わらず、具体的なサポートや仕組みに落とし込む動きがしやすくなります。たとえば、負担が偏らないようタスクを調整したり、安心して話せる時間や場をつくったり。あなたが何気なくやっているその配慮が、チームや家族の「居心地のよさ」を支えていることが多いタイプです。やさしさと実務力、その両方を併せ持つことが、あなたの大きな強みです。`
      },
      "WATER-FIRE": {
        title: "情熱を支える伴走タイプ",
        oneLine: "ガツガツ前に出るより、情熱的な人の隣で支えながら一緒に走る人。",
        longText: `才能エレメントWATER、星エレメントFIREのあなたは、「情熱的な人たちのそばで、その想いを支えながら一緒に走る伴走者」です。自分がガンガン前に出るというより、誰かの「やりたい」「届けたい」という気持ちに共感し、その人が気持ちよく走れるように寄り添うことが多いタイプです。
相手の不安や迷いにも敏感なので、「本当はこう思ってるんじゃない？」と気持ちを言語化してあげたり、「大丈夫、そのペースで合ってるよ」と火が消えないように支えたりすることができます。情熱の勢いと、繊細なケア。その両方を扱えるからこそ、チャレンジの場に安心感を持ち込める人です。表舞台に立つ人の影で、実はあなたの存在が大きな支えになっている場面がたくさんあります。`
      },
      "WATER-AIR": {
        title: "対話で場を整えるファシリタイプ",
        oneLine: "対話を通して、一人ひとりの声を拾いながら場をまとめていく人。",
        longText: `才能エレメントWATER、星エレメントAIRのあなたは、「人の気持ちを大事にしながら、対話を通じて場を整える人」です。誰かが話した言葉の裏側にある感情や、言葉になっていない本音に気づき、「それって、こういうことかな？」と優しく確認していくことができます。
一方で、AIRの要素があることで、感情的になりすぎず、全体の流れや構造も冷静に見ていられるタイプです。その結果、会議や話し合いの場では、「一人ひとりの声を拾いながら、全体としての方向性を見失わない」ファシリテーターとしての才能が発揮されやすくなります。安心して話せる空気づくりと、対話の整理。どちらもできるからこそ、あなたがいる場はじわっと居心地がよくなっていきます。`
      },
      "WATER-WATER": {
        title: "安心感でつなぐコネクタータイプ",
        oneLine: "「ここにいるとホッとする」と感じる人と人を、やわらかくつないでいく人。",
        longText: `才能も星もWATERに偏っているあなたは、「安心感そのものがギフト」のような存在です。人のちょっとした表情の変化や、場の雰囲気の揺らぎに敏感で、何気ない一言やさりげない行動で、空気をやわらげていきます。
深くつながった人や、大切な場所に対しての想いが強く、「誰かがさみしい思いをしている状態」を放っておきにくいタイプです。そのため、自然と橋渡し役を担ったり、「ここにいるとホッとする」と思ってもらえる居場所をつくったりしていることが多いでしょう。派手さよりも、じんわりと染み込むようなあたたかさ。その存在感そのものが、人と人をつなぎ、場の安心感を支えている、大きな才能になっています。`
      }
    };

    // ---- 質問定義 ----
    const questions = [
      // X1 大地のデザイン軸
      { id: 1, axis: "X1", text: "やることを紙やアプリにリスト化してから行動することが多い。" },
      { id: 2, axis: "X1", text: "物事を進める前に、手順や流れを整理したくなる。" },
      { id: 3, axis: "X1", text: "「この順番でやると効率がいい」と考えながら動いている。" },
      { id: 4, axis: "X1", text: "仕事や家事のやり方を、もっと楽になるように工夫するのが好きだ。" },
      { id: 5, axis: "X1", text: "みんなが迷わないように、ルールや仕組みを整えたくなる。" },
      { id: 6, axis: "X1", text: "ゴールから逆算してスケジュールを組むのが得意だと感じる。" },

      // X2 大地の実行軸
      { id: 7, axis: "X2", text: "途中で投げ出すのが嫌で、つい最後までやり切ってしまう。" },
      { id: 8, axis: "X2", text: "締め切りが近づくと、むしろ集中力が高まるほうだ。" },
      { id: 9, axis: "X2", text: "「途中までやって放置」が気持ち悪く感じる。" },
      { id: 10, axis: "X2", text: "大変でも、一度引き受けたことはやり遂げたいと思う。" },
      { id: 11, axis: "X2", text: "人から頼まれたことを忘れないよう、きちんと終わらせようとする。" },
      { id: 12, axis: "X2", text: "長期的なプロジェクトでも、コツコツ続けることができる。" },

      // I1 火の発信軸
      { id: 13, axis: "I1", text: "人前で話すことに、そこまで強い抵抗はない。" },
      { id: 14, axis: "I1", text: "自分の考えや経験を、SNSやブログなどで発信したくなる。" },
      { id: 15, axis: "I1", text: "場が静かすぎると、つい話題を振ったり盛り上げたりしてしまう。" },
      { id: 16, axis: "I1", text: "自分の意見をハッキリ言う方だと思う。" },
      { id: 17, axis: "I1", text: "初対面の人とも、わりとすぐに会話を広げられる。" },
      { id: 18, axis: "I1", text: "「あなたがいると場の雰囲気が明るくなる」と言われたことがある。" },

      // I2 火の推進軸
      { id: 19, axis: "I2", text: "みんなの意見を聞いたうえで、「じゃあこうしよう」と方向性を示すことが多い。" },
      { id: 20, axis: "I2", text: "企画やアイデアを、人に分かりやすくプレゼンするのが好きだ。" },
      { id: 21, axis: "I2", text: "相手に納得してもらえる説明の仕方を考えるのが得意だ。" },
      { id: 22, axis: "I2", text: "チームや周囲を巻き込みながら、物事を前に進めるのが好きだ。" },
      { id: 23, axis: "I2", text: "自分がいいと思ったものは、人にも勧めたくなる。" },
      { id: 24, axis: "I2", text: "会議や話し合いで、最終的に結論をまとめる役割になることが多い。" },

      // T1 風の分析軸
      { id: 25, axis: "T1", text: "情報を聞いたとき「なぜそうなるのか？」を考えたくなる。" },
      { id: 26, axis: "T1", text: "問題が起きると、原因を分析して再発防止策を考える。" },
      { id: 27, axis: "T1", text: "データや数字を見て判断するのが好きだ。" },
      { id: 28, axis: "T1", text: "物事のメリット・デメリットを整理してから決めたいタイプだ。" },
      { id: 29, axis: "T1", text: "複雑な話を構造化して、図や箇条書きでまとめるのが得意だ。" },
      { id: 30, axis: "T1", text: "先のリスクや抜け漏れに、比較的早く気づく方だ。" },

      // T2 風の探究軸
      { id: 31, axis: "T2", text: "興味を持ったテーマは、ネットや本で徹底的に調べたくなる。" },
      { id: 32, axis: "T2", text: "学びのための講座や本に、お金や時間を使うことに抵抗が少ない。" },
      { id: 33, axis: "T2", text: "「なぜ？」「どういう仕組み？」と深く掘り下げて考えるのが好きだ。" },
      { id: 34, axis: "T2", text: "一度ハマった分野については、人より詳しくなりがちだ。" },
      { id: 35, axis: "T2", text: "新しい知識や考え方に触れるとワクワクする。" },
      { id: 36, axis: "T2", text: "学んだことを自分なりに整理して、メモやノートにまとめることが多い。" },

      // R1 水の共感軸
      { id: 37, axis: "R1", text: "人の表情や声のトーンから、気持ちの変化に敏感だと思う。" },
      { id: 38, axis: "R1", text: "悩んでいる人の話を聞くと、つい親身になってしまう。" },
      { id: 39, axis: "R1", text: "相手が傷つかないような言い方を選びがちだ。" },
      { id: 40, axis: "R1", text: "相談されることが多い方だ。" },
      { id: 41, axis: "R1", text: "相手の立場に立って考える癖がある。" },
      { id: 42, axis: "R1", text: "誰かが疎外されている雰囲気に気づくと、放っておけない。" },

      // R2 水のチーム軸
      { id: 43, axis: "R2", text: "一人でやるより、誰かと一緒に進める方がやる気が出る。" },
      { id: 44, axis: "R2", text: "チームのメンバーそれぞれの強みや個性を意識して見ている。" },
      { id: 45, axis: "R2", text: "役割分担やスケジュールを調整することが多い。" },
      { id: 46, axis: "R2", text: "場の空気がギスギスしていると、なんとか和らげたくなる。" },
      { id: 47, axis: "R2", text: "みんなが気持ちよく働けるように、裏でサポートするのが得意だ。" },
      { id: 48, axis: "R2", text: "会議や作業の前後に、メンバーに声をかけてフォローすることが多い。" }
    ];

    // ---- DOM ----
    const container       = document.getElementById("questionsContainer");
    const form            = document.getElementById("quizForm");
    const resultCard      = document.getElementById("resultCard");
    const resultContent   = document.getElementById("resultContent");
    const copyBtn         = document.getElementById("copyResultBtn");
    const shareBtn        = document.getElementById("shareResultBtn");
    const shareMsg        = document.getElementById("shareMessage");
    const birthDateInput  = document.getElementById("birthDate");
    const astroResultBox  = document.getElementById("astroResultBox");

    let radarChart = null;
    let latestShareText = "";
    let latestTalentElementKey = null;

    // ---- 質問描画 ----
    questions.forEach((q, index) => {
      const wrap = document.createElement("div");
      wrap.className = "question";

      const title = document.createElement("div");
      title.className = "question-title";
      title.textContent = `${index + 1}. ${q.text}`;
      wrap.appendChild(title);

      const options = document.createElement("div");
      options.className = "options";

      const labels = [
        "1：まったく当てはまらない",
        "2：あまり当てはまらない",
        "3：どちらともいえない",
        "4：かなり当てはまる",
        "5：とても当てはまる"
      ];

      for (let value = 1; value <= 5; value++) {
        const label = document.createElement("label");
        label.className = "option";
        const input = document.createElement("input");
        input.type = "radio";
        input.name = `q${q.id}`;
        input.value = value;
        label.appendChild(input);
        label.appendChild(document.createTextNode(labels[value - 1]));
        options.appendChild(label);
      }

      wrap.appendChild(options);
      container.appendChild(wrap);
    });

    // ---- 採点処理 ----
    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const answers = {};
      let allAnswered = true;

      questions.forEach(q => {
        const selected = form.querySelector(`input[name="q${q.id}"]:checked`);
        if (!selected) {
          allAnswered = false;
        } else {
          answers[q.id] = Number(selected.value);
        }
      });

      if (!allAnswered) {
        alert("まだ答えていない質問があります。すべての質問に回答してください。");
        return;
      }

      // 軸ごとのスコア
      const axisScores = {};
      const axisMax = {};
      Object.keys(axes).forEach(axisId => {
        axisScores[axisId] = 0;
        axisMax[axisId] = 0;
      });

      questions.forEach(q => {
        const axisId = q.axis;
        axisScores[axisId] += answers[q.id];
        axisMax[axisId] += 5;
      });

      // ドメイン集計
      const domainScores = {};
      const domainMax = {};
      Object.values(axes).forEach(a => {
        if (!domainScores[a.domain]) {
          domainScores[a.domain] = 0;
          domainMax[a.domain] = 0;
        }
        domainScores[a.domain] += axisScores[a.id];
        domainMax[a.domain] += axisMax[a.id];
      });

      // 軸→％
      const axisResultList = Object.keys(axes).map(axisId => {
        const meta = axes[axisId];
        const raw = axisScores[axisId];
        const max = axisMax[axisId] || 1;
        const percent = Math.round(raw / max * 100);
        return {
          id: axisId,
          label: meta.label,
          domain: meta.domain,
          rawScore: raw,
          percent,
          max
        };
      }).sort((a, b) => b.percent - a.percent);

      const top3 = axisResultList.slice(0, 3);

      // ドメイン→％
      const domainResultList = Object.keys(domainScores).map(domainName => {
        const raw = domainScores[domainName];
        const max = domainMax[domainName] || 1;
        const percent = Math.round(raw / max * 100);
        return { domain: domainName, rawScore: raw, max, percent };
      }).sort((a, b) => b.percent - a.percent);

      const mainDomain = domainResultList[0];
      latestTalentElementKey = getElementKeyFromDomainName(mainDomain.domain);

      // 結果HTML
      let html = "";

      // 4エレメント
      html += `<div class="result-title">4エレメントのバランス</div>`;
      html += `<p class="small">数字が高いほど、そのエレメントの才能を今よく使っている可能性が高いです。</p>`;

      domainResultList.forEach((d, index) => {
        const color = domainColors[d.domain] || "#4b7bec";
        html += `
          <div class="axis-row">
            <div class="axis-label">
              ${index + 1}. ${d.domain}
            </div>
            <div class="axis-bar-wrap">
              <div class="axis-bar" style="width:${d.percent}%; background:${color};"></div>
            </div>
            <div class="axis-percent">${d.percent}%</div>
          </div>
        `;
      });

      const mainElementLabel = mainDomain.domain;
      html += `<p class="small">👉 あなたの<strong>メインエレメント</strong>は「<strong>${mainElementLabel}</strong>」です。</p>`;
      html += `<p class="small">${
        domainResultList.map(d =>
          `<strong>${d.domain}</strong>：${domainDescriptions[d.domain]}`
        ).join("<br>")
      }</p>`;

      // 4エレメントと8軸のつながり
      html += `<hr style="margin:14px 0;">`;
      html += `<div class="result-title">4エレメントと8軸のつながり</div>`;
      html += `<p class="small">
        各エレメントは、次の2つの軸で構成されています。<br>
        EARTH：大地のデザイン軸／大地の実行軸<br>
        FIRE：火の発信軸／火の推進軸<br>
        AIR：風の分析軸／風の探究軸<br>
        WATER：水の共感軸／水のチーム軸
      </p>`;

      // 8軸結果
      html += `<hr style="margin:14px 0;">`;
      html += `<div class="result-title">8軸の結果（上位3つが今のメイン才能）</div>`;

      axisResultList.forEach((a, index) => {
        const color = domainColors[a.domain] || "#4b7bec";
        html += `
          <div class="axis-row">
            <div class="axis-label">
              ${index + 1}. ${a.label}
              <span class="small">（${a.domain}）</span>
              ${index < 3 ? `<span class="badge">メイン才能</span>` : ""}
            </div>
            <div class="axis-bar-wrap">
              <div class="axis-bar" style="width:${a.percent}%; background:${color};"></div>
            </div>
            <div class="axis-percent">${a.percent}%</div>
          </div>
        `;
      });

      // 上位3軸の詳しいフィードバック
      html += `<hr style="margin:14px 0;">`;
      html += `<div class="result-title">上位3軸の詳しいフィードバック</div>`;
      top3.forEach(a => {
        const text = axisLongFeedback[a.id] || "";
        html += `
          <p class="small"><strong>${a.label}</strong>（${a.domain}）<br>${text}</p>
        `;
      });

      // 3つの掛け合わせメッセージ（個別パターン → なければデフォルト）
      const comboIds = top3.map(a => a.id).sort();
      const comboKey = comboIds.join("-");
      const comboMessageText = comboMessages[comboKey] || buildDefaultTop3Message(top3);

      html += `<p class="small"><strong>3つの掛け合わせフィードバック：</strong><br>${comboMessageText}</p>`;

      // 全8軸の解説
      html += `<hr style="margin:14px 0;">`;
      html += `<div class="result-title">全8軸の解説</div>`;
      axisOrder.forEach(axisId => {
        const meta = axes[axisId];
        html += `
          <p>
            <strong>${meta.label}</strong>（${meta.domain}）<br>
            <span class="small">${axisDescriptions[axisId] || ""}</span>
          </p>
        `;
      });

      html += `<p class="small">※この結果は、あくまで「今のあなたがよく使っている才能のパターン」です。<br>しっくりくるところ・意外だったところをメモしながら、自分の経験と照らし合わせてみてください。</p>`;

      resultContent.innerHTML = html;
      resultCard.style.display = "block";

      // シェアテキスト
      let shareText = "【才能8軸診断＋エレメント結果】\n\n";
      shareText += "■ 4エレメントのバランス\n";
      domainResultList.forEach(d => {
        shareText += `・${d.domain}: ${d.percent}%\n`;
      });
      shareText += "\n■ 上位3軸\n";
      top3.forEach(a => {
        shareText += `・${a.label}（${a.domain}）: ${a.percent}%\n`;
      });
      shareText += "\n診断ツールはこちら：\n";
      shareText += window.location.href + "\n";

      latestShareText = shareText;
      shareMsg.textContent = "";

      // レーダーチャート
      const ctx = document.getElementById("domainRadar").getContext("2d");
      const labels = domainResultList.map(d => d.domain);
      const data = domainResultList.map(d => d.percent);

      if (radarChart) {
        radarChart.data.labels = labels;
        radarChart.data.datasets[0].data = data;
        radarChart.update();
      } else {
        radarChart = new Chart(ctx, {
          type: "radar",
          data: {
            labels: labels,
            datasets: [{
              label: "エレメントバランス",
              data: data,
              fill: true,
              backgroundColor: "rgba(139, 92, 246, 0.15)",
              borderColor: "rgba(139, 92, 246, 1)",
              pointBackgroundColor: "rgba(139, 92, 246, 1)"
            }]
          },
          options: {
            responsive: true,
            scales: {
              r: {
                suggestedMin: 0,
                suggestedMax: 100,
                ticks: { stepSize: 20 }
              }
            }
          }
        });
      }

      // 星×才能の結果更新
      updateAstroResult();

      resultCard.scrollIntoView({ behavior: "smooth" });
    });

    // シェアボタン
    copyBtn.onclick = async () => {
      if (!latestShareText) {
        shareMsg.textContent = "先に診断を完了してね。";
        return;
      }
      try {
        await navigator.clipboard.writeText(latestShareText);
        shareMsg.textContent = "結果テキストをコピーしました。好きなアプリに貼りつけて使ってね。";
      } catch (e) {
        shareMsg.textContent = "コピーに失敗しました…ブラウザによって使えない場合があります。";
      }
    };

    shareBtn.onclick = async () => {
      if (!latestShareText) {
        shareMsg.textContent = "先に診断を完了してね。";
        return;
      }
      if (navigator.share) {
        try {
          await navigator.share({
            title: "才能8軸診断 結果",
            text: latestShareText
          });
          shareMsg.textContent = "共有メニューを開きました。";
        } catch (e) {
          shareMsg.textContent = "共有がキャンセルされました。";
        }
      } else {
        shareMsg.textContent = "このブラウザは共有機能に対応していないので、コピー機能を使ってね。";
      }
    };

    // 星×才能 16タイプ表示
    function updateAstroResult() {
      if (!latestTalentElementKey) {
        astroResultBox.innerHTML = "<p>まずは上の診断で、才能8軸の結果を出してみてください。</p>";
        return;
      }

      const dateStr = birthDateInput.value;
      if (!dateStr) {
        astroResultBox.innerHTML = "<p>生年月日を入力すると、12星座と星エレメントを使った「星×才能」の結果が表示されます。</p>";
        return;
      }

      const zodiac = getZodiacFromBirthdate(dateStr);
      if (!zodiac) {
        astroResultBox.innerHTML = "<p>生年月日を正しく入力できているか確認してみてください。</p>";
        return;
      }

      const typeKey = `${latestTalentElementKey}-${zodiac.element}`;
      const typeData = talentStarTypes[typeKey];

      if (!typeData) {
        astroResultBox.innerHTML = "<p>星と才能の組み合わせ結果が見つかりませんでした。</p>";
        return;
      }

      const talentName = elementDisplayNames[latestTalentElementKey] || latestTalentElementKey;
      const starElementLabel = starElementLabels[zodiac.element] || "";

      let html = "";
      html += `<p class="small">
        太陽星座：<strong>${zodiac.name}</strong><br>
        星のエレメント：<strong>${starElementLabel}</strong><br>
        才能エレメント（診断結果）：<strong>${talentName}</strong>
      </p>`;
      html += `<p class="small">🌙 12星座から見るテーマ：${zodiac.description}</p>`;
      html += `<p><strong>星と才能を合わせたタイプ：${typeData.title}</strong><br>
        <span class="small">${typeData.oneLine}</span></p>`;
      if (typeData.longText) {
        html += `<p class="small">${typeData.longText.replace(/\n/g, "<br>")}</p>`;
      }

      astroResultBox.innerHTML = html;
    }

    birthDateInput.addEventListener("change", () => {
      if (latestTalentElementKey) {
        updateAstroResult();
      }
    });
  </script>

</body>
</html>
