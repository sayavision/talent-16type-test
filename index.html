<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ‰èƒ½8è»¸è¨ºæ–­ï¼‹æ˜Ÿã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ16ã‚¿ã‚¤ãƒ—ï¼ˆãƒ™ãƒ¼ã‚¿ï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆç”¨ï¼šChart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 16px;
      line-height: 1.7;
      background: #f7f7fb;
    }
    h1 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 16px 18px;
      margin: 12px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.04);
    }
    .question {
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid #eee;
    }
    .question:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }
    .question-title {
      font-weight: 600;
      margin-bottom: 6px;
    }
    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 0.9rem;
    }
    label.option {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #ddd;
      cursor: pointer;
      background: #fafafa;
    }
    input[type="radio"] {
      cursor: pointer;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      background: #4b7bec;
      color: white;
      margin-top: 8px;
    }
    button:disabled {
      opacity: 0.6;
      cursor: default;
    }
    .small {
      font-size: 0.85rem;
      color: #666;
    }
    .result-title {
      font-weight: 600;
      margin-bottom: 4px;
    }
    .axis-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin: 6px 0;
      font-size: 0.95rem;
    }
    .axis-label {
      min-width: 190px;
    }
    .axis-bar-wrap {
      flex: 1;
      background: #f0f0f5;
      border-radius: 999px;
      overflow: hidden;
      height: 10px;
    }
    .axis-bar {
      height: 100%;
      width: 0%;
      transition: width 0.4s;
    }
    .axis-percent {
      min-width: 40px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }
    .badge {
      display: inline-block;
      font-size: 0.75rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: #eef2ff;
      color: #3730a3;
      margin-left: 4px;
    }
    select {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #ccc;
      font-size: 0.9rem;
      margin-left: 4px;
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>æ‰èƒ½8è»¸è¨ºæ–­ï¼‹æ˜Ÿã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ16ã‚¿ã‚¤ãƒ—ï¼ˆãƒ™ãƒ¼ã‚¿ï¼‰</h1>
    <p class="small">
      ã‚ãªãŸã®ä¸­ã«ã‚ã‚‹<strong>4ã¤ã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ</strong>ï¼ˆEARTHï¼FIREï¼AIRï¼WATERï¼‰ã‚’ã€ã•ã‚‰ã«8ã¤ã®è»¸ã«åˆ†ã‘ã¦è¦‹ã¦ã„ãã¾ã™ã€‚<br>
      48å€‹ã®è³ªå•ã«ã€ç›´æ„Ÿã§1ã€œ5ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚
    </p>
    <p class="small">
      1ï¼šã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼2ï¼šã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼3ï¼šã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„ï¼4ï¼šã‹ãªã‚Šå½“ã¦ã¯ã¾ã‚‹ï¼5ï¼šã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹
    </p>
  </div>

  <form id="quizForm" class="card">
    <div id="questionsContainer"></div>
    <button type="submit">çµæœã‚’è¦‹ã‚‹</button>
    <p class="small">â€»ã™ã¹ã¦ã®è³ªå•ã«å›ç­”ã—ã¦ã‹ã‚‰ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p>
  </form>

  <div id="resultCard" class="card" style="display:none;">
    <div id="resultContent"></div>

    <!-- ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ -->
    <div id="resultShare" style="margin-top:12px;">
      <button type="button" id="copyResultBtn">çµæœãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼</button>
      <button type="button" id="shareResultBtn">çµæœã‚’ã‚·ã‚§ã‚¢</button>
      <p id="shareMessage" class="small"></p>
    </div>

    <hr style="margin:14px 0;">
    <div class="result-title">4ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ</div>
    <p class="small">å…¨ä½“ã®ãƒãƒ©ãƒ³ã‚¹ã‚’æ„Ÿè¦šçš„ã«çœºã‚ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
    <canvas id="domainRadar" style="max-width: 100%;"></canvas>

    <!-- æ˜Ÿã¨æ‰èƒ½ã®ã‚¿ã‚¤ãƒ—è¨ºæ–­ -->
    <hr style="margin:16px 0;">
    <div id="astroSection">
      <div class="result-title">æ˜Ÿã¨æ‰èƒ½ã‚’åˆã‚ã›ãŸ16ã‚¿ã‚¤ãƒ—è¨ºæ–­</div>
      <p class="small">
        å¤ªé™½æ˜Ÿåº§ã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚’é¸ã¶ã¨ã€æ˜Ÿã¨æ‰èƒ½ã‚’åˆã‚ã›ãŸ16ã‚¿ã‚¤ãƒ—ã®çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>
        ä¾‹ï¼šç‰¡ç¾Šãƒ»ç…å­ãƒ»å°„æ‰‹ â†’ FIREï¼ç‰¡ç‰›ãƒ»ä¹™å¥³ãƒ»å±±ç¾Š â†’ EARTHï¼åŒå­ãƒ»å¤©ç§¤ãƒ»æ°´ç“¶ â†’ AIRï¼èŸ¹ãƒ»è ãƒ»é­š â†’ WATER
      </p>
      <p class="small">
        ã‚ãªãŸã®å¤ªé™½æ˜Ÿåº§ã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆï¼š
        <select id="starElementSelect">
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="FIRE">FIREï¼ˆç‰¡ç¾Šãƒ»ç…å­ãƒ»å°„æ‰‹ï¼‰</option>
          <option value="EARTH">EARTHï¼ˆç‰¡ç‰›ãƒ»ä¹™å¥³ãƒ»å±±ç¾Šï¼‰</option>
          <option value="AIR">AIRï¼ˆåŒå­ãƒ»å¤©ç§¤ãƒ»æ°´ç“¶ï¼‰</option>
          <option value="WATER">WATERï¼ˆèŸ¹ãƒ»è ãƒ»é­šï¼‰</option>
        </select>
        <button type="button" id="astroResultBtn">ã‚¿ã‚¤ãƒ—ã‚’è¦‹ã‚‹</button>
      </p>
      <div id="astroResultBox" class="small" style="margin-top:10px;"></div>
    </div>
  </div>

  <script>
    // ---- 8è»¸å®šç¾©ï¼ˆã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆç‰ˆï¼‰ ----
    const axes = {
      // EARTHï¼šå½¢ã«ã™ã‚‹é ˜åŸŸ
      X1: { id: "X1", label: "å¤§åœ°ã®ãƒ‡ã‚¶ã‚¤ãƒ³è»¸", domain: "EARTHï½œå½¢ã«ã™ã‚‹é ˜åŸŸ" },
      X2: { id: "X2", label: "å¤§åœ°ã®å®Ÿè¡Œè»¸",   domain: "EARTHï½œå½¢ã«ã™ã‚‹é ˜åŸŸ" },

      // FIREï¼šäººã¨å ´ã‚’å‹•ã‹ã™é ˜åŸŸ
      I1: { id: "I1", label: "ç«ã®ç™ºä¿¡è»¸",     domain: "FIREï½œäººã¨å ´ã‚’å‹•ã‹ã™é ˜åŸŸ" },
      I2: { id: "I2", label: "ç«ã®æ¨é€²è»¸",     domain: "FIREï½œäººã¨å ´ã‚’å‹•ã‹ã™é ˜åŸŸ" },

      // AIRï¼šã—ãã¿ã‚’çµ„ã‚€é ˜åŸŸ
      T1: { id: "T1", label: "é¢¨ã®åˆ†æè»¸",     domain: "AIRï½œã—ãã¿ã‚’çµ„ã‚€é ˜åŸŸ" },
      T2: { id: "T2", label: "é¢¨ã®æ¢ç©¶è»¸",     domain: "AIRï½œã—ãã¿ã‚’çµ„ã‚€é ˜åŸŸ" },

      // WATERï¼šçµ†ã‚’è‚²ã¦ã‚‹é ˜åŸŸ
      R1: { id: "R1", label: "æ°´ã®å…±æ„Ÿè»¸",     domain: "WATERï½œçµ†ã‚’è‚²ã¦ã‚‹é ˜åŸŸ" },
      R2: { id: "R2", label: "æ°´ã®ãƒãƒ¼ãƒ è»¸",   domain: "WATERï½œçµ†ã‚’è‚²ã¦ã‚‹é ˜åŸŸ" }
    };

    // ---- 4ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®èª¬æ˜ ----
    const domainDescriptions = {
      "EARTHï½œå½¢ã«ã™ã‚‹é ˜åŸŸ":
        "ç¾å®Ÿä¸–ç•Œã§ä¸€æ­©ãšã¤ã€Œå½¢ã«ã—ã¦ã„ãã€ã‚¨ãƒªã‚¢ã€‚è¨ˆç”»ã‚’ç«‹ã¦ã‚‹ãƒ»æ®µå–ã‚Šã™ã‚‹ãƒ»ã‚„ã‚Šåˆ‡ã‚‹ã“ã¨ã§ã€ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç¾å®Ÿã®çµæœã«ã¤ãªã’ã¦ã„ãé ˜åŸŸã§ã™ã€‚",

      "FIREï½œäººã¨å ´ã‚’å‹•ã‹ã™é ˜åŸŸ":
        "è¨€è‘‰ã‚„å­˜åœ¨æ„Ÿã§ã€äººã¨å ´ã«ç«ã‚’ç¯ã™ã‚¨ãƒªã‚¢ã€‚ç™ºä¿¡ãƒ»èª¬å¾—ãƒ»ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãªã©ã‚’é€šã—ã¦ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç”Ÿã¿å‡ºã—ã€å‘¨ã‚Šã‚’å‹•ã‹ã—ã¦ã„ãé ˜åŸŸã§ã™ã€‚",

      "AIRï½œã—ãã¿ã‚’çµ„ã‚€é ˜åŸŸ":
        "ä¸€æ­©å¼•ã„ãŸè¦–ç‚¹ã§å…¨ä½“ã‚’è¦‹æ¸¡ã—ã€ã€Œã—ãã¿ã€ã‚„ã€Œæ„å‘³ã€ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã‚¨ãƒªã‚¢ã€‚åˆ†æãƒ»å­¦ã³ãƒ»æˆ¦ç•¥ã¥ãã‚Šã§ã€æœ¬è³ªã‚’ã¨ã‚‰ãˆã¦ã„ãé ˜åŸŸã§ã™ã€‚",

      "WATERï½œçµ†ã‚’è‚²ã¦ã‚‹é ˜åŸŸ":
        "äººã®å¿ƒã‚„é–¢ä¿‚æ€§ã«æ°´ã‚’ãããã€ã‚†ã£ãã‚Šã¨çµ†ã‚’è‚²ã¦ã¦ã„ãã‚¨ãƒªã‚¢ã€‚å…±æ„Ÿãƒ»ã‚µãƒãƒ¼ãƒˆãƒ»ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’é€šã—ã¦ã€å®‰å¿ƒã§ãã‚‹ã¤ãªãŒã‚Šã‚’ã¤ãã‚‹é ˜åŸŸã§ã™ã€‚"
    };

    // 4ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆç”¨ã®è‰²ï¼ˆãƒãƒ¼ï¼†ãƒ¬ãƒ¼ãƒ€ãƒ¼ã§ä½¿ç”¨ï¼‰
    const domainColors = {
      "EARTHï½œå½¢ã«ã™ã‚‹é ˜åŸŸ": "#3B82F6",   // ãƒ–ãƒ«ãƒ¼
      "FIREï½œäººã¨å ´ã‚’å‹•ã‹ã™é ˜åŸŸ": "#F97316", // ã‚ªãƒ¬ãƒ³ã‚¸
      "AIRï½œã—ãã¿ã‚’çµ„ã‚€é ˜åŸŸ":   "#8B5CF6",   // ãƒ‘ãƒ¼ãƒ—ãƒ«
      "WATERï½œçµ†ã‚’è‚²ã¦ã‚‹é ˜åŸŸ":   "#22C55E"    // ã‚°ãƒªãƒ¼ãƒ³
    };

    // ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚­ãƒ¼â†’è¡¨ç¤ºå
    const elementDisplayNames = {
      EARTH: "EARTHï½œå½¢ã«ã™ã‚‹é ˜åŸŸ",
      FIRE:  "FIREï½œäººã¨å ´ã‚’å‹•ã‹ã™é ˜åŸŸ",
      AIR:   "AIRï½œã—ãã¿ã‚’çµ„ã‚€é ˜åŸŸ",
      WATER: "WATERï½œçµ†ã‚’è‚²ã¦ã‚‹é ˜åŸŸ"
    };

    // æ˜Ÿã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®è¡¨ç¤º
    const starElementLabels = {
      FIRE:  "FIREï¼ˆç«ï¼‰ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ",
      EARTH: "EARTHï¼ˆåœŸï¼‰ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ",
      AIR:   "AIRï¼ˆé¢¨ï¼‰ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ",
      WATER: "WATERï¼ˆæ°´ï¼‰ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ"
    };

    // 8è»¸ã®è©³ç´°èª¬æ˜
    const axisDescriptions = {
      // EARTH
      X1: "å¤§åœ°ã«é“ã‚„ç•‘ã‚’ã¤ãã‚‹ã‚ˆã†ã«ã€ã‚„ã‚‹ã“ã¨ã‚’æ•´ç†ã—ã¦æµã‚Œã‚„æ‰‹é †ã‚’çµ„ã¿ç«‹ã¦ã‚‹åŠ›ã€‚æ®µå–ã‚Šã‚„ä»•çµ„ã¿åŒ–ã§ã€Œé€²ã¿ã‚„ã™ã„é“ã€ã‚’ã¤ãã‚‹è»¸ã§ã™ã€‚",
      X2: "ã„ã¡ã©æ¤ãˆãŸç¨®ã‚’åç©«ã¾ã§è‚²ã¦ãã‚‹è¾²å®¶ã•ã‚“ã®ã‚ˆã†ã«ã€æ±ºã‚ãŸã“ã¨ã‚’ã‚³ãƒ„ã‚³ãƒ„å®Ÿè¡Œã—ã€æœ€å¾Œã¾ã§ã‚„ã‚Šåˆ‡ã‚‹åŠ›ã€‚å®Œäº†ã•ã›ã‚‹ã¨ã“ã‚ã§åŠ›ã‚’ç™ºæ®ã™ã‚‹è»¸ã§ã™ã€‚",

      // FIRE
      I1: "æš—ã„å ´æ‰€ã«ãƒ‘ãƒƒã¨ç«ã‚’ç¯ã™ç„šãç«ã®ã‚ˆã†ã«ã€å ´ã‚’æ˜ã‚‹ãã—ãŸã‚Šã€è‡ªåˆ†ã‚’è¡¨ç¾ã—ãŸã‚Šã™ã‚‹åŠ›ã€‚å­˜åœ¨æ„Ÿã‚„ç™ºä¿¡ã§ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å‹•ã‹ã™è»¸ã§ã™ã€‚",
      I2: "å°ã•ãªç«ç¨®ã‚’ã‚­ãƒ£ãƒ³ãƒ—ãƒ•ã‚¡ã‚¤ãƒ¤ãƒ¼ã«è‚²ã¦ã‚‹ã‚ˆã†ã«ã€äººã‚’å·»ãè¾¼ã¿ãªãŒã‚‰ç‰©äº‹ã‚’æ¨ã—é€²ã‚ã‚‹åŠ›ã€‚èª¬å¾—åŠ›ã‚„ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã§å ´ã‚’å‹•ã‹ã™è»¸ã§ã™ã€‚",

      // AIR
      T1: "é«˜ã„ã¨ã“ã‚ã‹ã‚‰é¢¨ã«ä¹—ã£ã¦å…¨ä½“ã‚’è¦‹æ¸¡ã™ã‚ˆã†ã«ã€æƒ…å ±ã‚„å‡ºæ¥äº‹ã‚’æ§‹é€ çš„ã«ã¨ã‚‰ãˆã‚‹åŠ›ã€‚ãƒ­ã‚¸ã‚«ãƒ«ã«åˆ†æã—ã€ãƒªã‚¹ã‚¯ã‚„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’èª­ã¿å–ã‚‹è»¸ã§ã™ã€‚",
      T2: "é¢¨ã®ã‚ˆã†ã«ã‚ã¡ã“ã¡ã‚’å·¡ã‚ŠãªãŒã‚‰ã€çŸ¥è­˜ã‚„çµŒé¨“ã‚’é›†ã‚ã¦ãã‚‹åŠ›ã€‚å¥½å¥‡å¿ƒã‚’ã‚¨ãƒ³ã‚¸ãƒ³ã«ã€å­¦ã³ãƒ»æ¢ç©¶ã‚’æ·±ã‚ã¦ã„ãè»¸ã§ã™ã€‚",

      // WATER
      R1: "ä¹¾ã„ãŸã¨ã“ã‚ã«æ°´ãŒã—ã¿è¾¼ã‚€ã‚ˆã†ã«ã€äººã®æ°—æŒã¡ã«ãã£ã¨å¯„ã‚Šãã„ã€å®‰å¿ƒæ„Ÿã‚’ã‚‚ãŸã‚‰ã™åŠ›ã€‚å…±æ„Ÿãƒ»ã‚±ã‚¢ã‚’é€šã—ã¦ã€å¿ƒã‚’æ½¤ã™è»¸ã§ã™ã€‚",
      R2: "ã„ãã¤ã‚‚ã®å°ã•ãªæµã‚Œã‚’ã²ã¨ã¤ã®å·ã«ã¾ã¨ã‚ã‚‹ã‚ˆã†ã«ã€äººã¨äººãƒ»ãƒãƒ¼ãƒ ã¨ãƒãƒ¼ãƒ ã‚’ã¤ãªãã€å”åŠ›ã—ã‚„ã™ã„å ´ã‚’ã¤ãã‚‹åŠ›ã€‚èª¿æ•´ãƒ»ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®è»¸ã§ã™ã€‚"
    };

    // æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ Ã— æ˜Ÿã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ â†’ 16ã‚¿ã‚¤ãƒ—å®šç¾©
    const talentStarTypes = {
      "EARTH-EARTH": {
        title: "ç•‘ã‚’è€•ã™å®Ÿè¡Œæ´¾ã‚¿ã‚¤ãƒ—",
        oneLine: "ã‚³ãƒ„ã‚³ãƒ„åœŸå°ã‚’ã¤ãã£ã¦ã€ç¢ºå®Ÿã«çµæœã‚’å‡ºã—ã¦ã„ãäººã€‚"
      },
      "EARTH-FIRE": {
        title: "æƒ…ç†±ã‚’å½¢ã«ã™ã‚‹å®Ÿè¡Œã‚¿ã‚¤ãƒ—",
        oneLine: "ã€Œã“ã‚Œã‚„ã‚ŠãŸã„ï¼ã€ã¨ã„ã†ç«ã‚’ã€ã¡ã‚ƒã‚“ã¨è¡Œå‹•ã¨æˆæœã«ã¤ãªã’ã‚‹äººã€‚"
      },
      "EARTH-AIR": {
        title: "è¨­è¨ˆå›³ã‹ã‚‰å½¢ã«ã™ã‚‹å®Ÿè¡Œã‚¿ã‚¤ãƒ—",
       oneLine: "é ­ã®ä¸­ã®ãƒ—ãƒ©ãƒ³ã‚„æ§‹é€ ã‚’ã€ãã®ã¾ã¾ç¾å®Ÿã®ä»•çµ„ã¿ã«è½ã¨ã—ã¦ã„ãäººã€‚"
      },
      "EARTH-WATER": {
        title: "æ€ã„ã‚„ã‚Šã§ç¾å ´ã‚’æ•´ãˆã‚‹å®Ÿè¡Œã‚¿ã‚¤ãƒ—",
        oneLine: "äººã®æ°—æŒã¡ã‚’ãã¿ã¨ã‚ŠãªãŒã‚‰ã€ç„¡ç†ã®ãªã„å½¢ã§ç‰©äº‹ã‚’é€²ã‚ã¦ã„ãäººã€‚"
      },

      "FIRE-FIRE": {
        title: "å ´ã‚’ç‡ƒã‚„ã™ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼ã‚¿ã‚¤ãƒ—",
        oneLine: "ã„ã‚‹ã ã‘ã§å ´ã®æ¸©åº¦ãŒä¸ŠãŒã‚‹ã€ç››ã‚Šä¸Šã’å½¹ï¼†ç«ä»˜ã‘å½¹ã€‚"
      },
      "FIRE-EARTH": {
        title: "åœ°ã«è¶³ã¤ã„ãŸãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—",
        oneLine: "ç¾å®Ÿæ„Ÿã®ã‚ã‚‹ä¸€è¨€ã§ã€ã¿ã‚“ãªã‚’ãã„ã£ã¨å‰ã«é€²ã‚ã‚‹ãƒªãƒ¼ãƒ€ãƒ¼ã€‚"
      },
      "FIRE-AIR": {
        title: "è¨€è‘‰ã§ç«ã‚’ã¤ã‘ã‚‹ç™ºä¿¡ã‚¿ã‚¤ãƒ—",
        oneLine: "è¨€è‘‰ã‚„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã§ã€äººã®å¿ƒã«ã€Œã‚„ã£ã¦ã¿ãŸã„ï¼ã€ã‚’ç¯ã™äººã€‚"
      },
      "FIRE-WATER": {
        title: "å¿ƒã«ç«ã‚’ç¯ã™å¿œæ´ã‚¿ã‚¤ãƒ—",
        oneLine: "ç›¸æ‰‹ã®æ°—æŒã¡ã«å¯„ã‚Šãã„ãªãŒã‚‰ã€ã€Œä¸€æ­©å‡ºã¦ã¿ã‚ˆã†ã‚ˆã€ã¨èƒŒä¸­ã‚’æŠ¼ã™äººã€‚"
      },

      "AIR-FIRE": {
        title: "ã‚¢ã‚¤ãƒ‡ã‚¢ã§å ´ã‚’å‹•ã‹ã™ä¼ç”»ã‚¿ã‚¤ãƒ—",
        oneLine: "ãŠã‚‚ã—ã‚ã„ä¼ç”»ã‚„å·¥å¤«ã§ã€äººã‚„å ´ã‚’ãƒ¯ã‚¯ãƒ¯ã‚¯ã•ã›ã‚‹äººã€‚"
      },
      "AIR-EARTH": {
        title: "ç¾å®Ÿã‚’æ•´ãˆã‚‹è¨­è¨ˆã‚¿ã‚¤ãƒ—",
        oneLine: "æ··ã–ã£ãŸçŠ¶æ³ã‚’æ•´ç†ã—ã¦ã€ä»•çµ„ã¿ã‚„ãƒ«ãƒ¼ãƒ«ã«è½ã¨ã—è¾¼ã‚€äººã€‚"
      },
      "AIR-AIR": {
        title: "æœ¬è³ªã‚’èª­ã¿è§£ããƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ—",
        oneLine: "æƒ…å ±ã®ä¸­ã‹ã‚‰ãƒ„ãƒœã‚’è¦‹æŠœãã€ã€Œçµå±€ã“ã“ãŒå¤§äº‹ã€ã¨æ–¹å‘ã‚’ç¤ºã™äººã€‚"
      },
      "AIR-WATER": {
        title: "ç‰©èªã‚’è´ãå‡ºã™ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç·¨é›†ã‚¿ã‚¤ãƒ—",
        oneLine: "ç›¸æ‰‹ã®è©±ã®ä¸­ã‹ã‚‰ã€ãã®äººã‚‰ã—ã„ç‰©èªã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¼•ãå‡ºã™äººã€‚"
      },

      "WATER-FIRE": {
        title: "æƒ…ç†±ã‚’æ”¯ãˆã‚‹ä¼´èµ°ã‚¿ã‚¤ãƒ—",
        oneLine: "ã‚¬ãƒ„ã‚¬ãƒ„å‰ã«å‡ºã‚‹ã‚ˆã‚Šã€æƒ…ç†±çš„ãªäººã®éš£ã§æ”¯ãˆãªãŒã‚‰ä¸€ç·’ã«èµ°ã‚‹äººã€‚"
      },
      "WATER-EARTH": {
        title: "ç¾å ´ã‚’ã‚ãŸãŸã‚ã‚‹ã‚±ã‚¢ã‚¿ã‚¤ãƒ—",
        oneLine: "ãƒãƒ¼ãƒ ã‚„å ´ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’è¦‹ãªãŒã‚‰ã€å®‰å¿ƒã—ã¦å‹•ã‘ã‚‹ç’°å¢ƒã‚’æ•´ãˆã‚‹äººã€‚"
      },
      "WATER-AIR": {
        title: "å¯¾è©±ã§å ´ã‚’æ•´ãˆã‚‹ãƒ•ã‚¡ã‚·ãƒªã‚¿ã‚¤ãƒ—",
        oneLine: "å¯¾è©±ã‚’é€šã—ã¦ã€ä¸€äººã²ã¨ã‚Šã®å£°ã‚’æ‹¾ã„ãªãŒã‚‰å ´ã‚’ã¾ã¨ã‚ã¦ã„ãäººã€‚"
      },
      "WATER-WATER": {
        title: "å®‰å¿ƒæ„Ÿã§ã¤ãªãã‚³ãƒã‚¯ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ—",
        oneLine: "ã€Œã“ã“ã«ã„ã‚‹ã¨ãƒ›ãƒƒã¨ã™ã‚‹ã€ã¨æ„Ÿã˜ã‚‹äººã¨äººã‚’ã€ã‚„ã‚ã‚‰ã‹ãã¤ãªã„ã§ã„ãäººã€‚"
      }
    };

    // ãƒ‰ãƒ¡ã‚¤ãƒ³åã‹ã‚‰ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚­ãƒ¼ã‚’å–ã‚Šå‡ºã™
    function getElementKeyFromDomainName(domainName) {
      if (!domainName) return null;
      if (domainName.startsWith("EARTH")) return "EARTH";
      if (domainName.startsWith("FIRE"))  return "FIRE";
      if (domainName.startsWith("AIR"))   return "AIR";
      if (domainName.startsWith("WATER")) return "WATER";
      return null;
    }

    // ---- è³ªå•å®šç¾©ï¼ˆ48å•ï¼‰ ----
    const questions = [
      // X1 å¤§åœ°ã®ãƒ‡ã‚¶ã‚¤ãƒ³è»¸
      { id: 1, axis: "X1", text: "ã‚„ã‚‹ã“ã¨ã‚’ç´™ã‚„ã‚¢ãƒ—ãƒªã«ãƒªã‚¹ãƒˆåŒ–ã—ã¦ã‹ã‚‰è¡Œå‹•ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚" },
      { id: 2, axis: "X1", text: "ç‰©äº‹ã‚’é€²ã‚ã‚‹å‰ã«ã€æ‰‹é †ã‚„æµã‚Œã‚’æ•´ç†ã—ãŸããªã‚‹ã€‚" },
      { id: 3, axis: "X1", text: "ã€Œã“ã®é †ç•ªã§ã‚„ã‚‹ã¨åŠ¹ç‡ãŒã„ã„ã€ã¨è€ƒãˆãªãŒã‚‰å‹•ã„ã¦ã„ã‚‹ã€‚" },
      { id: 4, axis: "X1", text: "ä»•äº‹ã‚„å®¶äº‹ã®ã‚„ã‚Šæ–¹ã‚’ã€ã‚‚ã£ã¨æ¥½ã«ãªã‚‹ã‚ˆã†ã«å·¥å¤«ã™ã‚‹ã®ãŒå¥½ãã ã€‚" },
      { id: 5, axis: "X1", text: "ã¿ã‚“ãªãŒè¿·ã‚ãªã„ã‚ˆã†ã«ã€ãƒ«ãƒ¼ãƒ«ã‚„ä»•çµ„ã¿ã‚’æ•´ãˆãŸããªã‚‹ã€‚" },
      { id: 6, axis: "X1", text: "ã‚´ãƒ¼ãƒ«ã‹ã‚‰é€†ç®—ã—ã¦ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’çµ„ã‚€ã®ãŒå¾—æ„ã ã¨æ„Ÿã˜ã‚‹ã€‚" },

      // X2 å¤§åœ°ã®å®Ÿè¡Œè»¸
      { id: 7, axis: "X2", text: "é€”ä¸­ã§æŠ•ã’å‡ºã™ã®ãŒå«Œã§ã€ã¤ã„æœ€å¾Œã¾ã§ã‚„ã‚Šåˆ‡ã£ã¦ã—ã¾ã†ã€‚" },
      { id: 8, axis: "X2", text: "ç· ã‚åˆ‡ã‚ŠãŒè¿‘ã¥ãã¨ã€ã‚€ã—ã‚é›†ä¸­åŠ›ãŒé«˜ã¾ã‚‹ã»ã†ã ã€‚" },
      { id: 9, axis: "X2", text: "ã€Œé€”ä¸­ã¾ã§ã‚„ã£ã¦æ”¾ç½®ã€ãŒæ°—æŒã¡æ‚ªãæ„Ÿã˜ã‚‹ã€‚" },
      { id: 10, axis: "X2", text: "å¤§å¤‰ã§ã‚‚ã€ä¸€åº¦å¼•ãå—ã‘ãŸã“ã¨ã¯ã‚„ã‚Šé‚ã’ãŸã„ã¨æ€ã†ã€‚" },
      { id: 11, axis: "X2", text: "äººã‹ã‚‰é ¼ã¾ã‚ŒãŸã“ã¨ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã€ãã¡ã‚“ã¨çµ‚ã‚ã‚‰ã›ã‚ˆã†ã¨ã™ã‚‹ã€‚" },
      { id: 12, axis: "X2", text: "é•·æœŸçš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ã€ã‚³ãƒ„ã‚³ãƒ„ç¶šã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚" },

      // I1 ç«ã®ç™ºä¿¡è»¸
      { id: 13, axis: "I1", text: "äººå‰ã§è©±ã™ã“ã¨ã«ã€ãã“ã¾ã§å¼·ã„æŠµæŠ—ã¯ãªã„ã€‚" },
      { id: 14, axis: "I1", text: "è‡ªåˆ†ã®è€ƒãˆã‚„çµŒé¨“ã‚’ã€SNSã‚„ãƒ–ãƒ­ã‚°ãªã©ã§ç™ºä¿¡ã—ãŸããªã‚‹ã€‚" },
      { id: 15, axis: "I1", text: "å ´ãŒé™ã‹ã™ãã‚‹ã¨ã€ã¤ã„è©±é¡Œã‚’æŒ¯ã£ãŸã‚Šç››ã‚Šä¸Šã’ãŸã‚Šã—ã¦ã—ã¾ã†ã€‚" },
      { id: 16, axis: "I1", text: "è‡ªåˆ†ã®æ„è¦‹ã‚’ãƒãƒƒã‚­ãƒªè¨€ã†æ–¹ã ã¨æ€ã†ã€‚" },
      { id: 17, axis: "I1", text: "åˆå¯¾é¢ã®äººã¨ã‚‚ã€ã‚ã‚Šã¨ã™ãã«ä¼šè©±ã‚’åºƒã’ã‚‰ã‚Œã‚‹ã€‚" },
      { id: 18, axis: "I1", text: "ã€Œã‚ãªãŸãŒã„ã‚‹ã¨å ´ã®é›°å›²æ°—ãŒæ˜ã‚‹ããªã‚‹ã€ã¨è¨€ã‚ã‚ŒãŸã“ã¨ãŒã‚ã‚‹ã€‚" },

      // I2 ç«ã®æ¨é€²è»¸
      { id: 19, axis: "I2", text: "ã¿ã‚“ãªã®æ„è¦‹ã‚’èã„ãŸã†ãˆã§ã€ã€Œã˜ã‚ƒã‚ã“ã†ã—ã‚ˆã†ã€ã¨æ–¹å‘æ€§ã‚’ç¤ºã™ã“ã¨ãŒå¤šã„ã€‚" },
      { id: 20, axis: "I2", text: "ä¼ç”»ã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ã€äººã«åˆ†ã‹ã‚Šã‚„ã™ããƒ—ãƒ¬ã‚¼ãƒ³ã™ã‚‹ã®ãŒå¥½ãã ã€‚" },
      { id: 21, axis: "I2", text: "ç›¸æ‰‹ã«ç´å¾—ã—ã¦ã‚‚ã‚‰ãˆã‚‹èª¬æ˜ã®ä»•æ–¹ã‚’è€ƒãˆã‚‹ã®ãŒå¾—æ„ã ã€‚" },
      { id: 22, axis: "I2", text: "ãƒãƒ¼ãƒ ã‚„å‘¨å›²ã‚’å·»ãè¾¼ã¿ãªãŒã‚‰ã€ç‰©äº‹ã‚’å‰ã«é€²ã‚ã‚‹ã®ãŒå¥½ãã ã€‚" },
      { id: 23, axis: "I2", text: "è‡ªåˆ†ãŒã„ã„ã¨æ€ã£ãŸã‚‚ã®ã¯ã€äººã«ã‚‚å‹§ã‚ãŸããªã‚‹ã€‚" },
      { id: 24, axis: "I2", text: "ä¼šè­°ã‚„è©±ã—åˆã„ã§ã€æœ€çµ‚çš„ã«çµè«–ã‚’ã¾ã¨ã‚ã‚‹å½¹å‰²ã«ãªã‚‹ã“ã¨ãŒå¤šã„ã€‚" },

      // T1 é¢¨ã®åˆ†æè»¸
      { id: 25, axis: "T1", text: "æƒ…å ±ã‚’èã„ãŸã¨ãã€Œãªãœãã†ãªã‚‹ã®ã‹ï¼Ÿã€ã‚’è€ƒãˆãŸããªã‚‹ã€‚" },
      { id: 26, axis: "T1", text: "å•é¡ŒãŒèµ·ãã‚‹ã¨ã€åŸå› ã‚’åˆ†æã—ã¦å†ç™ºé˜²æ­¢ç­–ã‚’è€ƒãˆã‚‹ã€‚" },
      { id: 27, axis: "T1", text: "ãƒ‡ãƒ¼ã‚¿ã‚„æ•°å­—ã‚’è¦‹ã¦åˆ¤æ–­ã™ã‚‹ã®ãŒå¥½ãã ã€‚" },
      { id: 28, axis: "T1", text: "ç‰©äº‹ã®ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’æ•´ç†ã—ã¦ã‹ã‚‰æ±ºã‚ãŸã„ã‚¿ã‚¤ãƒ—ã ã€‚" },
      { id: 29, axis: "T1", text: "è¤‡é›‘ãªè©±ã‚’æ§‹é€ åŒ–ã—ã¦ã€å›³ã‚„ç®‡æ¡æ›¸ãã§ã¾ã¨ã‚ã‚‹ã®ãŒå¾—æ„ã ã€‚" },
      { id: 30, axis: "T1", text: "å…ˆã®ãƒªã‚¹ã‚¯ã‚„æŠœã‘æ¼ã‚Œã«ã€æ¯”è¼ƒçš„æ—©ãæ°—ã¥ãæ–¹ã ã€‚" },

      // T2 é¢¨ã®æ¢ç©¶è»¸
      { id: 31, axis: "T2", text: "èˆˆå‘³ã‚’æŒã£ãŸãƒ†ãƒ¼ãƒã¯ã€ãƒãƒƒãƒˆã‚„æœ¬ã§å¾¹åº•çš„ã«èª¿ã¹ãŸããªã‚‹ã€‚" },
      { id: 32, axis: "T2", text: "å­¦ã³ã®ãŸã‚ã®è¬›åº§ã‚„æœ¬ã«ã€ãŠé‡‘ã‚„æ™‚é–“ã‚’ä½¿ã†ã“ã¨ã«æŠµæŠ—ãŒå°‘ãªã„ã€‚" },
      { id: 33, axis: "T2", text: "ã€Œãªãœï¼Ÿã€ã€Œã©ã†ã„ã†ä»•çµ„ã¿ï¼Ÿã€ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã¦è€ƒãˆã‚‹ã®ãŒå¥½ãã ã€‚" },
      { id: 34, axis: "T2", text: "ä¸€åº¦ãƒãƒã£ãŸåˆ†é‡ã«ã¤ã„ã¦ã¯ã€äººã‚ˆã‚Šè©³ã—ããªã‚ŠãŒã¡ã ã€‚" },
      { id: 35, axis: "T2", text: "æ–°ã—ã„çŸ¥è­˜ã‚„è€ƒãˆæ–¹ã«è§¦ã‚Œã‚‹ã¨ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ã€‚" },
      { id: 36, axis: "T2", text: "å­¦ã‚“ã ã“ã¨ã‚’è‡ªåˆ†ãªã‚Šã«æ•´ç†ã—ã¦ã€ãƒ¡ãƒ¢ã‚„ãƒãƒ¼ãƒˆã«ã¾ã¨ã‚ã‚‹ã“ã¨ãŒå¤šã„ã€‚" },

      // R1 æ°´ã®å…±æ„Ÿè»¸
      { id: 37, axis: "R1", text: "äººã®è¡¨æƒ…ã‚„å£°ã®ãƒˆãƒ¼ãƒ³ã‹ã‚‰ã€æ°—æŒã¡ã®å¤‰åŒ–ã«æ•æ„Ÿã ã¨æ€ã†ã€‚" },
      { id: 38, axis: "R1", text: "æ‚©ã‚“ã§ã„ã‚‹äººã®è©±ã‚’èãã¨ã€ã¤ã„è¦ªèº«ã«ãªã£ã¦ã—ã¾ã†ã€‚" },
      { id: 39, axis: "R1", text: "ç›¸æ‰‹ãŒå‚·ã¤ã‹ãªã„ã‚ˆã†ãªè¨€ã„æ–¹ã‚’é¸ã³ãŒã¡ã ã€‚" },
      { id: 40, axis: "R1", text: "ç›¸è«‡ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„æ–¹ã ã€‚" },
      { id: 41, axis: "R1", text: "ç›¸æ‰‹ã®ç«‹å ´ã«ç«‹ã£ã¦è€ƒãˆã‚‹ç™–ãŒã‚ã‚‹ã€‚" },
      { id: 42, axis: "R1", text: "èª°ã‹ãŒç–å¤–ã•ã‚Œã¦ã„ã‚‹é›°å›²æ°—ã«æ°—ã¥ãã¨ã€æ”¾ã£ã¦ãŠã‘ãªã„ã€‚" },

      // R2 æ°´ã®ãƒãƒ¼ãƒ è»¸
      { id: 43, axis: "R2", text: "ä¸€äººã§ã‚„ã‚‹ã‚ˆã‚Šã€èª°ã‹ã¨ä¸€ç·’ã«é€²ã‚ã‚‹æ–¹ãŒã‚„ã‚‹æ°—ãŒå‡ºã‚‹ã€‚" },
      { id: 44, axis: "R2", text: "ãƒãƒ¼ãƒ ã®ãƒ¡ãƒ³ãƒãƒ¼ãã‚Œãã‚Œã®å¼·ã¿ã‚„å€‹æ€§ã‚’æ„è­˜ã—ã¦è¦‹ã¦ã„ã‚‹ã€‚" },
      { id: 45, axis: "R2", text: "å½¹å‰²åˆ†æ‹…ã‚„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚" },
      { id: 46, axis: "R2", text: "å ´ã®ç©ºæ°—ãŒã‚®ã‚¹ã‚®ã‚¹ã—ã¦ã„ã‚‹ã¨ã€ãªã‚“ã¨ã‹å’Œã‚‰ã’ãŸããªã‚‹ã€‚" },
      { id: 47, axis: "R2", text: "ã¿ã‚“ãªãŒæ°—æŒã¡ã‚ˆãåƒã‘ã‚‹ã‚ˆã†ã«ã€è£ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã®ãŒå¾—æ„ã ã€‚" },
      { id: 48, axis: "R2", text: "ä¼šè­°ã‚„ä½œæ¥­ã®å‰å¾Œã«ã€ãƒ¡ãƒ³ãƒãƒ¼ã«å£°ã‚’ã‹ã‘ã¦ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚" }
    ];

    // ---- è³ªå•æç”» ----
    const container = document.getElementById("questionsContainer");

    questions.forEach((q, index) => {
      const wrap = document.createElement("div");
      wrap.className = "question";

      const title = document.createElement("div");
      title.className = "question-title";
      title.textContent = `${index + 1}. ${q.text}`;
      wrap.appendChild(title);

      const options = document.createElement("div");
      options.className = "options";

      const labels = [
        "1ï¼šã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„",
        "2ï¼šã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„",
        "3ï¼šã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„",
        "4ï¼šã‹ãªã‚Šå½“ã¦ã¯ã¾ã‚‹",
        "5ï¼šã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹"
      ];

      for (let value = 1; value <= 5; value++) {
        const label = document.createElement("label");
        label.className = "option";
        const input = document.createElement("input");
        input.type = "radio";
        input.name = `q${q.id}`;
        input.value = value;
        label.appendChild(input);
        label.appendChild(document.createTextNode(labels[value - 1]));
        options.appendChild(label);
      }

      wrap.appendChild(options);
      container.appendChild(wrap);
    });

    // ---- æ¡ç‚¹å‡¦ç† ----
    const form = document.getElementById("quizForm");
    const resultCard = document.getElementById("resultCard");
    const resultContent = document.getElementById("resultContent");
    let radarChart = null;
    let latestShareText = "";
    let latestTalentElementKey = null; // EARTH/FIRE/AIR/WATER

    const shareDiv = document.getElementById("resultShare");
    const copyBtn = document.getElementById("copyResultBtn");
    const shareBtn = document.getElementById("shareResultBtn");
    const shareMsg = document.getElementById("shareMessage");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const answers = {};
      let allAnswered = true;

      questions.forEach(q => {
        const selected = form.querySelector(`input[name="q${q.id}"]:checked`);
        if (!selected) {
          allAnswered = false;
        } else {
          answers[q.id] = Number(selected.value);
        }
      });

      if (!allAnswered) {
        alert("ã¾ã ç­”ãˆã¦ã„ãªã„è³ªå•ãŒã‚ã‚Šã¾ã™ã€‚ã™ã¹ã¦ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚");
        return;
      }

      // è»¸ã”ã¨ã®ã‚¹ã‚³ã‚¢ã¨æœ€å¤§å€¤
      const axisScores = {};
      const axisMax = {};
      Object.keys(axes).forEach(axisId => {
        axisScores[axisId] = 0;
        axisMax[axisId] = 0;
      });

      questions.forEach(q => {
        const axisId = q.axis;
        axisScores[axisId] += answers[q.id];
        axisMax[axisId] += 5; // å„è³ªå•ã®æœ€å¤§å€¤ã¯5
      });

      // ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆï¼‰é›†è¨ˆ
      const domainScores = {};
      const domainMax = {};
      Object.values(axes).forEach(a => {
        if (!domainScores[a.domain]) {
          domainScores[a.domain] = 0;
          domainMax[a.domain] = 0;
        }
        domainScores[a.domain] += axisScores[a.id];
        domainMax[a.domain] += axisMax[a.id];
      });

      // è»¸ã‚¹ã‚³ã‚¢â†’ï¼…ï¼†ä¸¦ã¹æ›¿ãˆ
      const axisResultList = Object.keys(axes).map(axisId => {
        const meta = axes[axisId];
        const raw = axisScores[axisId];
        const max = axisMax[axisId] || 1;
        const percent = Math.round(raw / max * 100);
        return {
          id: axisId,
          label: meta.label,
          domain: meta.domain,
          rawScore: raw,
          percent,
          max
        };
      }).sort((a, b) => b.percent - a.percent);

      const top3 = axisResultList.slice(0, 3);

      // ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¹ã‚³ã‚¢â†’ï¼…
      const domainResultList = Object.keys(domainScores).map(domainName => {
        const raw = domainScores[domainName];
        const max = domainMax[domainName] || 1;
        const percent = Math.round(raw / max * 100);
        return { domain: domainName, rawScore: raw, max, percent };
      }).sort((a, b) => b.percent - a.percent);

      // ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚’ä¿å­˜ï¼ˆæ˜ŸÃ—æ‰èƒ½ç”¨ï¼‰
      const mainDomain = domainResultList[0];
      latestTalentElementKey = getElementKeyFromDomainName(mainDomain.domain);

      // çµæœHTMLç”Ÿæˆ
      let html = "";

      html += `<div class="result-title">4ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®ãƒãƒ©ãƒ³ã‚¹</div>`;
      html += `<p class="small">æ•°å­—ãŒé«˜ã„ã»ã©ã€ãã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®æ‰èƒ½ã‚’ä»Šã‚ˆãä½¿ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚</p>`;

      domainResultList.forEach((d, index) => {
        const color = domainColors[d.domain] || "#4b7bec";
        html += `
          <div class="axis-row">
            <div class="axis-label">
              ${index + 1}. ${d.domain}
            </div>
            <div class="axis-bar-wrap">
              <div class="axis-bar" style="width:${d.percent}%; background:${color};"></div>
            </div>
            <div class="axis-percent">${d.percent}%</div>
          </div>
        `;
      });

      const mainElementLabel = mainDomain.domain;
      html += `<p class="small">ğŸ‘‰ ã‚ãªãŸã®<strong>ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ</strong>ã¯ã€Œ<strong>${mainElementLabel}</strong>ã€ã§ã™ã€‚</p>`;

      html += `<p class="small">${
        domainResultList.map(d =>
          `<strong>${d.domain}</strong>ï¼š${domainDescriptions[d.domain]}`
        ).join("<br>")
      }</p>`;

      html += `<hr style="margin:14px 0;">`;
      html += `<div class="result-title">8è»¸ã®çµæœï¼ˆä¸Šä½3ã¤ãŒä»Šã®ãƒ¡ã‚¤ãƒ³æ‰èƒ½ï¼‰</div>`;

      axisResultList.forEach((a, index) => {
        const color = domainColors[a.domain] || "#4b7bec";
        html += `
          <div class="axis-row">
            <div class="axis-label">
              ${index + 1}. ${a.label}
              <span class="small">ï¼ˆ${a.domain}ï¼‰</span>
              ${index < 3 ? `<span class="badge">ãƒ¡ã‚¤ãƒ³æ‰èƒ½</span>` : ""}
            </div>
            <div class="axis-bar-wrap">
              <div class="axis-bar" style="width:${a.percent}%; background:${color};"></div>
            </div>
            <div class="axis-percent">${a.percent}%</div>
          </div>
        `;
      });

      html += `<hr style="margin:14px 0;">`;
      html += `<div class="result-title">ä¸Šä½3è»¸ã®è§£èª¬</div>`;
      top3.forEach(a => {
        html += `
          <p>
            <strong>${a.label}</strong>ï¼ˆ${a.domain}ï¼‰<br>
            <span class="small">${axisDescriptions[a.id] || ""}</span>
          </p>
        `;
      });

      html += `<p class="small">â€»ã“ã®çµæœã¯ã€ã‚ãã¾ã§ã€Œä»Šã®ã‚ãªãŸãŒã‚ˆãä½¿ã£ã¦ã„ã‚‹æ‰èƒ½ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã§ã™ã€‚<br>ã—ã£ãã‚Šãã‚‹ã¨ã“ã‚ãƒ»æ„å¤–ã ã£ãŸã¨ã“ã‚ã‚’ãƒ¡ãƒ¢ã—ãªãŒã‚‰ã€è‡ªåˆ†ã®çµŒé¨“ã¨ç…§ã‚‰ã—åˆã‚ã›ã¦ã¿ã¦ãã ã•ã„ã€‚</p>`;

      resultContent.innerHTML = html;
      resultCard.style.display = "block";

      // ã‚·ã‚§ã‚¢ç”¨ãƒ†ã‚­ã‚¹ãƒˆ
      let shareText = "ã€æ‰èƒ½8è»¸è¨ºæ–­ï¼‹ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆçµæœã€‘\n\n";

      shareText += "â–  4ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®ãƒãƒ©ãƒ³ã‚¹\n";
      domainResultList.forEach(d => {
        shareText += `ãƒ»${d.domain}: ${d.percent}%\n`;
      });

      shareText += "\nâ–  ä¸Šä½3è»¸\n";
      top3.forEach(a => {
        shareText += `ãƒ»${a.label}ï¼ˆ${a.domain}ï¼‰: ${a.percent}%\n`;
      });

      shareText += "\nè¨ºæ–­ãƒ„ãƒ¼ãƒ«ã¯ã“ã¡ã‚‰ï¼š\n";
      shareText += "https://YOUR-USERNAME.github.io/YOUR-REPO-NAME/\n"; // â† ã“ã“ã¯ã‚ã¨ã§æ›¸ãæ›ãˆã¦OK

      latestShareText = shareText;
      shareMsg.textContent = "";

      // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆæç”»
      const ctx = document.getElementById("domainRadar").getContext("2d");
      const labels = domainResultList.map(d => d.domain);
      const data = domainResultList.map(d => d.percent);
      const bgColors = domainResultList.map(d => (domainColors[d.domain] || "#4b7bec") + "33");
      const borderColors = domainResultList.map(d => domainColors[d.domain] || "#4b7bec");

      if (radarChart) {
        radarChart.data.labels = labels;
        radarChart.data.datasets[0].data = data;
        radarChart.update();
      } else {
        radarChart = new Chart(ctx, {
          type: "radar",
          data: {
            labels: labels,
            datasets: [{
              label: "ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆãƒãƒ©ãƒ³ã‚¹",
              data: data,
              fill: true,
              backgroundColor: "rgba(75, 123, 236, 0.15)",
              borderColor: "rgba(75, 123, 236, 1)",
              pointBackgroundColor: "rgba(75, 123, 236, 1)"
            }]
          },
          options: {
            responsive: true,
            scales: {
              r: {
                suggestedMin: 0,
                suggestedMax: 100,
                ticks: { stepSize: 20 }
              }
            }
          }
        });
      }

      resultCard.scrollIntoView({ behavior: "smooth" });
    });

    // ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®å‹•ã
    copyBtn.onclick = async () => {
      if (!latestShareText) {
        shareMsg.textContent = "å…ˆã«è¨ºæ–­ã‚’å®Œäº†ã—ã¦ã­ã€‚";
        return;
      }
      try {
        await navigator.clipboard.writeText(latestShareText);
        shareMsg.textContent = "çµæœãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚å¥½ããªã‚¢ãƒ—ãƒªã«è²¼ã‚Šã¤ã‘ã¦ä½¿ã£ã¦ã­ã€‚";
      } catch (e) {
        shareMsg.textContent = "ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸâ€¦ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚ˆã£ã¦ä½¿ãˆãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚";
      }
    };

    shareBtn.onclick = async () => {
      if (!latestShareText) {
        shareMsg.textContent = "å…ˆã«è¨ºæ–­ã‚’å®Œäº†ã—ã¦ã­ã€‚";
        return;
      }
      if (navigator.share) {
        try {
          await navigator.share({
            title: "æ‰èƒ½8è»¸è¨ºæ–­ çµæœ",
            text: latestShareText
          });
          shareMsg.textContent = "å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ãã¾ã—ãŸã€‚";
        } catch (e) {
          shareMsg.textContent = "å…±æœ‰ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸã€‚";
        }
      } else {
        shareMsg.textContent = "ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å…±æœ‰æ©Ÿèƒ½ã«å¯¾å¿œã—ã¦ã„ãªã„ã®ã§ã€ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã­ã€‚";
      }
    };

    // æ˜ŸÃ—æ‰èƒ½ 16ã‚¿ã‚¤ãƒ—è¡¨ç¤º
    const starElementSelect = document.getElementById("starElementSelect");
    const astroResultBtn = document.getElementById("astroResultBtn");
    const astroResultBox = document.getElementById("astroResultBox");

    astroResultBtn.addEventListener("click", () => {
      if (!latestTalentElementKey) {
        astroResultBox.innerHTML = "<p>ã¾ãšã¯ä¸Šã®è¨ºæ–­ã§ã€æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®çµæœã‚’å‡ºã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>";
        return;
      }
      const starElement = starElementSelect.value;
      if (!starElement) {
        astroResultBox.innerHTML = "<p>å¤ªé™½æ˜Ÿåº§ã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</p>";
        return;
      }

      const key = `${latestTalentElementKey}-${starElement}`;
      const typeData = talentStarTypes[key];

      if (!typeData) {
        astroResultBox.innerHTML = "<p>ã‚¿ã‚¤ãƒ—ã®çµ„ã¿åˆã‚ã›ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>";
        return;
      }

      const talentName = elementDisplayNames[latestTalentElementKey] || latestTalentElementKey;
      const starLabel = starElementLabels[starElement] || starElement;

      let html = "";
      html += `<p class="small">æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆï¼š<strong>${talentName}</strong><br>`;
      html += `å¤ªé™½æ˜Ÿåº§ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆï¼š<strong>${starLabel}</strong></p>`;
      html += `<p><strong>ã‚ãªãŸã¯ã€Œ${typeData.title}ã€ã§ã™ã€‚</strong><br>`;
      html += `<span class="small">${typeData.oneLine}</span></p>`;

      astroResultBox.innerHTML = html;
    });
  </script>

</body>
</html>
