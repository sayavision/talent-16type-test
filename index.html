<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ‰èƒ½Ã—ãƒ›ãƒ­ã‚¹ã‚³ãƒ¼ãƒ— 16ã‚¿ã‚¤ãƒ—è¨ºæ–­ï¼ˆãƒ©ã‚¤ãƒˆç‰ˆï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 16px;
      line-height: 1.7;
      background: #f7f7fb;
    }
    h1 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 16px 18px;
      margin: 12px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.04);
    }
    .small {
      font-size: 0.85rem;
      color: #555;
    }
    .question {
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid #eee;
    }
    .question:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }
    .question-title {
      font-weight: 600;
      margin-bottom: 6px;
    }
    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 0.9rem;
    }
    label.option {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #ddd;
      cursor: pointer;
      background: #fafafa;
    }
    input[type="radio"] {
      cursor: pointer;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      background: #4b7bec;
      color: white;
      margin-top: 8px;
    }
    button:disabled {
      opacity: 0.6;
      cursor: default;
    }
    .axis-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin: 6px 0;
      font-size: 0.95rem;
    }
    .axis-label {
      min-width: 190px;
    }
    .axis-bar-wrap {
      flex: 1;
      background: #f0f0f5;
      border-radius: 999px;
      overflow: hidden;
      height: 10px;
    }
    .axis-bar {
      height: 100%;
      width: 0%;
      transition: width 0.4s;
    }
    .axis-percent {
      min-width: 40px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }
    select {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #ccc;
      font-size: 0.9rem;
      margin-left: 4px;
    }
    .result-title {
      font-weight: 600;
      margin-bottom: 4px;
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>æ‰èƒ½Ã—ãƒ›ãƒ­ã‚¹ã‚³ãƒ¼ãƒ— 16ã‚¿ã‚¤ãƒ—è¨ºæ–­ï¼ˆãƒ©ã‚¤ãƒˆç‰ˆï¼‰</h1>
    <p class="small">
      ã“ã®è¨ºæ–­ã§ã¯ã€ã¾ãš<strong>4ã¤ã®æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ</strong>ï¼ˆEARTHï¼FIREï¼AIRï¼WATERï¼‰ã®ä¸­ã§ã€<br>
      ã‚ãªãŸãŒä»Šã„ã¡ã°ã‚“ä½¿ã£ã¦ã„ã‚‹ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚’ã–ã£ãã‚Šãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚<br>
      ãã®ã‚ã¨<strong>å¤ªé™½æ˜Ÿåº§ã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ</strong>ã‚’é¸ã¶ã¨ã€æ˜Ÿã¨æ‰èƒ½ã‚’åˆã‚ã›ãŸ16ã‚¿ã‚¤ãƒ—ã®çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
    </p>
    <p class="small">
      å„è³ªå•ã«ã¤ã„ã¦ã€ã€Œ1ï¼šã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„ã€ã€œã€Œ5ï¼šã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹ã€ã§ç­”ãˆã¦ãã ã•ã„ã€‚
    </p>
  </div>

  <form id="quizForm" class="card">
    <div id="questionsContainer"></div>
    <button type="submit">æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®çµæœã‚’è¦‹ã‚‹</button>
    <p class="small">â€»ã™ã¹ã¦ã®è³ªå•ã«å›ç­”ã—ã¦ã‹ã‚‰ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p>
  </form>

  <div id="resultCard" class="card" style="display:none;">
    <div id="talentResult"></div>

    <hr style="margin:16px 0;">

    <div id="astroSection">
      <div class="result-title">æ˜Ÿã¨æ‰èƒ½ã‚’åˆã‚ã›ãŸã‚¿ã‚¤ãƒ—è¨ºæ–­</div>
      <p class="small">
        å¤ªé™½æ˜Ÿåº§ã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚’é¸ã¶ã¨ã€æ˜Ÿã¨æ‰èƒ½ã‚’åˆã‚ã›ãŸ16ã‚¿ã‚¤ãƒ—ã®çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>
        ä¾‹ï¼šç‰¡ç¾Šãƒ»ç…å­ãƒ»å°„æ‰‹ â†’ FIREï¼ç‰¡ç‰›ãƒ»ä¹™å¥³ãƒ»å±±ç¾Š â†’ EARTHï¼åŒå­ãƒ»å¤©ç§¤ãƒ»æ°´ç“¶ â†’ AIRï¼èŸ¹ãƒ»è ãƒ»é­š â†’ WATER
      </p>
      <p class="small">
        ã‚ãªãŸã®å¤ªé™½æ˜Ÿåº§ã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆï¼š
        <select id="starElementSelect">
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="FIRE">FIREï¼ˆç‰¡ç¾Šãƒ»ç…å­ãƒ»å°„æ‰‹ï¼‰</option>
          <option value="EARTH">EARTHï¼ˆç‰¡ç‰›ãƒ»ä¹™å¥³ãƒ»å±±ç¾Šï¼‰</option>
          <option value="AIR">AIRï¼ˆåŒå­ãƒ»å¤©ç§¤ãƒ»æ°´ç“¶ï¼‰</option>
          <option value="WATER">WATERï¼ˆèŸ¹ãƒ»è ãƒ»é­šï¼‰</option>
        </select>
        <button type="button" id="astroResultBtn">ã‚¿ã‚¤ãƒ—ã‚’è¦‹ã‚‹</button>
      </p>
      <div id="astroResultBox" class="small" style="margin-top:10px;"></div>
    </div>
  </div>

  <script>
    // æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®è¡¨ç¤ºå
    const elementDisplayNames = {
      EARTH: "EARTHï½œå½¢ã«ã™ã‚‹é ˜åŸŸ",
      FIRE:  "FIREï½œäººã¨å ´ã‚’å‹•ã‹ã™é ˜åŸŸ",
      AIR:   "AIRï½œã—ãã¿ã‚’çµ„ã‚€é ˜åŸŸ",
      WATER: "WATERï½œçµ†ã‚’è‚²ã¦ã‚‹é ˜åŸŸ"
    };

    // æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®èª¬æ˜
    const elementDescriptions = {
      EARTH: "è¨ˆç”»ã‚’ç«‹ã¦ã‚‹ãƒ»æ®µå–ã‚Šã‚’çµ„ã‚€ãƒ»ã‚³ãƒ„ã‚³ãƒ„ã‚„ã‚Šåˆ‡ã‚‹ã“ã¨ã§ã€ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç¾å®Ÿã®å½¢ã«ã—ã¦ã„ãã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã§ã™ã€‚",
      FIRE:  "ç™ºä¿¡ãƒ»ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãƒ»ç››ã‚Šä¸Šã’å½¹ãªã©ã€äººã¨å ´ã‚’å‹•ã‹ã™ã“ã¨ã§ã€æµã‚Œã‚’ä½œã£ã¦ã„ãã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã§ã™ã€‚",
      AIR:   "æƒ…å ±ã‚’é›†ã‚ã¦æ•´ç†ã—ãŸã‚Šã€ã—ãã¿ã‚„ãƒ«ãƒ¼ãƒ«ã‚’è€ƒãˆãŸã‚Šã—ãªãŒã‚‰ã€æœ¬è³ªã‚’ã¤ã‹ã‚€ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã§ã™ã€‚",
      WATER: "äººã®æ°—æŒã¡ã‚„å ´ã®é›°å›²æ°—ã«æ•æ„Ÿã§ã€å®‰å¿ƒã§ãã‚‹ã¤ãªãŒã‚Šã‚„ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å¤§åˆ‡ã«ã™ã‚‹ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã§ã™ã€‚"
    };

    // æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ Ã— æ˜Ÿã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ â†’ 16ã‚¿ã‚¤ãƒ—å®šç¾©
    const talentStarTypes = {
      "EARTH-EARTH": {
        title: "ç•‘ã‚’è€•ã™å®Ÿè¡Œæ´¾ã‚¿ã‚¤ãƒ—",
        oneLine: "ã‚³ãƒ„ã‚³ãƒ„åœŸå°ã‚’ã¤ãã£ã¦ã€ç¢ºå®Ÿã«çµæœã‚’å‡ºã—ã¦ã„ãäººã€‚"
      },
      "EARTH-FIRE": {
        title: "æƒ…ç†±ã‚’å½¢ã«ã™ã‚‹å®Ÿè¡Œã‚¿ã‚¤ãƒ—",
        oneLine: "ã€Œã“ã‚Œã‚„ã‚ŠãŸã„ï¼ã€ã¨ã„ã†ç«ã‚’ã€ã¡ã‚ƒã‚“ã¨è¡Œå‹•ã¨æˆæœã«ã¤ãªã’ã‚‹äººã€‚"
      },
      "EARTH-AIR": {
        title: "è¨­è¨ˆå›³ã‹ã‚‰å½¢ã«ã™ã‚‹å®Ÿè¡Œã‚¿ã‚¤ãƒ—",
        oneLine: "é ­ã®ä¸­ã®ãƒ—ãƒ©ãƒ³ã‚„æ§‹é€ ã‚’ã€ãã®ã¾ã¾ç¾å®Ÿã®ä»•çµ„ã¿ã«è½ã¨ã—ã¦ã„ãäººã€‚"
      },
      "EARTH-WATER": {
        title: "æ€ã„ã‚„ã‚Šã§ç¾å ´ã‚’æ•´ãˆã‚‹å®Ÿè¡Œã‚¿ã‚¤ãƒ—",
        oneLine: "äººã®æ°—æŒã¡ã‚’ãã¿ã¨ã‚ŠãªãŒã‚‰ã€ç„¡ç†ã®ãªã„å½¢ã§ç‰©äº‹ã‚’é€²ã‚ã¦ã„ãäººã€‚"
      },

      "FIRE-FIRE": {
        title: "å ´ã‚’ç‡ƒã‚„ã™ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼ã‚¿ã‚¤ãƒ—",
        oneLine: "ã„ã‚‹ã ã‘ã§å ´ã®æ¸©åº¦ãŒä¸ŠãŒã‚‹ã€ç››ã‚Šä¸Šã’å½¹ï¼†ç«ä»˜ã‘å½¹ã€‚"
      },
      "FIRE-EARTH": {
        title: "åœ°ã«è¶³ã¤ã„ãŸãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—",
        oneLine: "ç¾å®Ÿæ„Ÿã®ã‚ã‚‹ä¸€è¨€ã§ã€ã¿ã‚“ãªã‚’ãã„ã£ã¨å‰ã«é€²ã‚ã‚‹ãƒªãƒ¼ãƒ€ãƒ¼ã€‚"
      },
      "FIRE-AIR": {
        title: "è¨€è‘‰ã§ç«ã‚’ã¤ã‘ã‚‹ç™ºä¿¡ã‚¿ã‚¤ãƒ—",
        oneLine: "è¨€è‘‰ã‚„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã§ã€äººã®å¿ƒã«ã€Œã‚„ã£ã¦ã¿ãŸã„ï¼ã€ã‚’ç¯ã™äººã€‚"
      },
      "FIRE-WATER": {
        title: "å¿ƒã«ç«ã‚’ç¯ã™å¿œæ´ã‚¿ã‚¤ãƒ—",
        oneLine: "ç›¸æ‰‹ã®æ°—æŒã¡ã«å¯„ã‚Šãã„ãªãŒã‚‰ã€ã€Œä¸€æ­©å‡ºã¦ã¿ã‚ˆã†ã‚ˆã€ã¨èƒŒä¸­ã‚’æŠ¼ã™äººã€‚"
      },

      "AIR-FIRE": {
        title: "ã‚¢ã‚¤ãƒ‡ã‚¢ã§å ´ã‚’å‹•ã‹ã™ä¼ç”»ã‚¿ã‚¤ãƒ—",
        oneLine: "ãŠã‚‚ã—ã‚ã„ä¼ç”»ã‚„å·¥å¤«ã§ã€äººã‚„å ´ã‚’ãƒ¯ã‚¯ãƒ¯ã‚¯ã•ã›ã‚‹äººã€‚"
      },
      "AIR-EARTH": {
        title: "ç¾å®Ÿã‚’æ•´ãˆã‚‹è¨­è¨ˆã‚¿ã‚¤ãƒ—",
        oneLine: "æ··ã–ã£ãŸçŠ¶æ³ã‚’æ•´ç†ã—ã¦ã€ä»•çµ„ã¿ã‚„ãƒ«ãƒ¼ãƒ«ã«è½ã¨ã—è¾¼ã‚€äººã€‚"
      },
      "AIR-AIR": {
        title: "æœ¬è³ªã‚’èª­ã¿è§£ããƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ—",
        oneLine: "æƒ…å ±ã®ä¸­ã‹ã‚‰ãƒ„ãƒœã‚’è¦‹æŠœãã€ã€Œçµå±€ã“ã“ãŒå¤§äº‹ã€ã¨æ–¹å‘ã‚’ç¤ºã™äººã€‚"
      },
      "AIR-WATER": {
        title: "ç‰©èªã‚’è´ãå‡ºã™ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç·¨é›†ã‚¿ã‚¤ãƒ—",
        oneLine: "ç›¸æ‰‹ã®è©±ã®ä¸­ã‹ã‚‰ã€ãã®äººã‚‰ã—ã„ç‰©èªã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¼•ãå‡ºã™äººã€‚"
      },

      "WATER-FIRE": {
        title: "æƒ…ç†±ã‚’æ”¯ãˆã‚‹ä¼´èµ°ã‚¿ã‚¤ãƒ—",
        oneLine: "ã‚¬ãƒ„ã‚¬ãƒ„å‰ã«å‡ºã‚‹ã‚ˆã‚Šã€æƒ…ç†±çš„ãªäººã®éš£ã§æ”¯ãˆãªãŒã‚‰ä¸€ç·’ã«èµ°ã‚‹äººã€‚"
      },
      "WATER-EARTH": {
        title: "ç¾å ´ã‚’ã‚ãŸãŸã‚ã‚‹ã‚±ã‚¢ã‚¿ã‚¤ãƒ—",
        oneLine: "ãƒãƒ¼ãƒ ã‚„å ´ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’è¦‹ãªãŒã‚‰ã€å®‰å¿ƒã—ã¦å‹•ã‘ã‚‹ç’°å¢ƒã‚’æ•´ãˆã‚‹äººã€‚"
      },
      "WATER-AIR": {
        title: "å¯¾è©±ã§å ´ã‚’æ•´ãˆã‚‹ãƒ•ã‚¡ã‚·ãƒªã‚¿ã‚¤ãƒ—",
        oneLine: "å¯¾è©±ã‚’é€šã—ã¦ã€ä¸€äººã²ã¨ã‚Šã®å£°ã‚’æ‹¾ã„ãªãŒã‚‰å ´ã‚’ã¾ã¨ã‚ã¦ã„ãäººã€‚"
      },
      "WATER-WATER": {
        title: "å®‰å¿ƒæ„Ÿã§ã¤ãªãã‚³ãƒã‚¯ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ—",
        oneLine: "ã€Œã“ã“ã«ã„ã‚‹ã¨ãƒ›ãƒƒã¨ã™ã‚‹ã€ã¨æ„Ÿã˜ã‚‹äººã¨äººã‚’ã€ã‚„ã‚ã‚‰ã‹ãã¤ãªã„ã§ã„ãäººã€‚"
      }
    };

    // æ‰èƒ½è¨ºæ–­ç”¨ã®è³ªå•ï¼ˆå„ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ3å•ãšã¤ãƒ»è¨ˆ12å•ã®ãƒ©ã‚¤ãƒˆç‰ˆï¼‰
    const questions = [
      // EARTH
      { id: 1, element: "EARTH", text: "è¨ˆç”»ã‚„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç«‹ã¦ã¦ã‹ã‚‰å‹•ãã“ã¨ãŒå¤šã„ã€‚" },
      { id: 2, element: "EARTH", text: "ã‚³ãƒ„ã‚³ãƒ„ç¶šã‘ã‚‹ä½œæ¥­ã‚„ã€åœ°é“ãªç©ã¿ä¸Šã’ã¯ã‚ã‚Šã¨å¾—æ„ã ã€‚" },
      { id: 3, element: "EARTH", text: "ã€Œæœ€å¾Œã¾ã§ã‚„ã‚Šåˆ‡ã‚‹ã“ã¨ã€ã«ã‚ã‚Šã¨ã“ã ã‚ã‚‹æ–¹ã ã¨æ€ã†ã€‚" },

      // FIRE
      { id: 4, element: "FIRE", text: "ãŠã‚‚ã—ã‚ãã†ãªã“ã¨ãŒã‚ã‚‹ã¨ã€ã™ãã«ã€Œã‚„ã£ã¦ã¿ãŸã„ï¼ã€ã¨æ€ã†ã€‚" },
      { id: 5, element: "FIRE", text: "äººå‰ã§è©±ã—ãŸã‚Šã€è‡ªåˆ†ã®è€ƒãˆã‚’ç™ºä¿¡ã™ã‚‹ã“ã¨ã«ã‚ã¾ã‚ŠæŠµæŠ—ãŒãªã„ã€‚" },
      { id: 6, element: "FIRE", text: "å ´ãŒé™ã‹ã™ãã‚‹ã¨ã€ã¤ã„ç››ã‚Šä¸Šã’å½¹ã«ãªã£ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹ã€‚" },

      // AIR
      { id: 7, element: "AIR", text: "è€ƒãˆã”ã¨ã‚’ã™ã‚‹ã¨ãã€ãƒ¡ãƒ¢ã‚„ãƒãƒ¼ãƒˆã«æ•´ç†ã—ã¦æ›¸ãå‡ºã™ã®ãŒå¥½ãã ã€‚" },
      { id: 8, element: "AIR", text: "æƒ…å ±ã‚„è©±ã‚’èã„ãŸã¨ãã€ã€Œçµå±€ã„ã¡ã°ã‚“å¤§äº‹ãªã®ã¯ã©ã“ï¼Ÿã€ã¨è€ƒãˆã‚‹ã€‚" },
      { id: 9, element: "AIR", text: "ä»•çµ„ã¿ã‚„ãƒ«ãƒ¼ãƒ«ã‚’æ•´ãˆãŸã‚Šæ”¹å–„ã—ãŸã‚Šã™ã‚‹ã“ã¨ã«èˆˆå‘³ãŒã‚ã‚‹ã€‚" },

      // WATER
      { id: 10, element: "WATER", text: "äººã®è¡¨æƒ…ã‚„å£°ã®ãƒˆãƒ¼ãƒ³ã‹ã‚‰ã€æ°—æŒã¡ã®å¤‰åŒ–ã«æ°—ã¥ãã‚„ã™ã„ã¨æ€ã†ã€‚" },
      { id: 11, element: "WATER", text: "èª°ã‹ãŒã—ã‚“ã©ãã†ã«ã—ã¦ã„ã‚‹ã¨ã€ã¤ã„å£°ã‚’ã‹ã‘ãŸããªã‚‹ã€‚" },
      { id: 12, element: "WATER", text: "å®‰å¿ƒã—ã¦è©±ã›ã‚‹å ´ã‚„é–¢ä¿‚æ€§ã‚’å¤§äº‹ã«ã—ãŸã„ã¨æ„Ÿã˜ã‚‹ã€‚" }
    ];

    // è³ªå•ã®æç”»
    const questionsContainer = document.getElementById("questionsContainer");

    questions.forEach((q, index) => {
      const wrap = document.createElement("div");
      wrap.className = "question";

      const title = document.createElement("div");
      title.className = "question-title";
      title.textContent = `${index + 1}. ${q.text}`;
      wrap.appendChild(title);

      const options = document.createElement("div");
      options.className = "options";

      const labels = [
        "1ï¼šã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„",
        "2ï¼šã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„",
        "3ï¼šã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„",
        "4ï¼šã‹ãªã‚Šå½“ã¦ã¯ã¾ã‚‹",
        "5ï¼šã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹"
      ];

      for (let value = 1; value <= 5; value++) {
        const label = document.createElement("label");
        label.className = "option";
        const input = document.createElement("input");
        input.type = "radio";
        input.name = `q${q.id}`;
        input.value = value;
        label.appendChild(input);
        label.appendChild(document.createTextNode(labels[value - 1]));
        options.appendChild(label);
      }

      wrap.appendChild(options);
      questionsContainer.appendChild(wrap);
    });

    const quizForm = document.getElementById("quizForm");
    const resultCard = document.getElementById("resultCard");
    const talentResultDiv = document.getElementById("talentResult");

    let latestTalentElementKey = null; // æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆï¼ˆFIRE/EARTH/AIR/WATERï¼‰ã®ã‚­ãƒ¼ã‚’ä¿å­˜

    quizForm.addEventListener("submit", function(e) {
      e.preventDefault();

      const answers = {};
      let allAnswered = true;

      questions.forEach(q => {
        const selected = quizForm.querySelector(`input[name="q${q.id}"]:checked`);
        if (!selected) {
          allAnswered = false;
        } else {
          answers[q.id] = Number(selected.value);
        }
      });

      if (!allAnswered) {
        alert("ã¾ã ç­”ãˆã¦ã„ãªã„è³ªå•ãŒã‚ã‚Šã¾ã™ã€‚ã™ã¹ã¦ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚");
        return;
      }

      // ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã”ã¨ã®ã‚¹ã‚³ã‚¢é›†è¨ˆ
      const scores = {
        EARTH: 0,
        FIRE: 0,
        AIR: 0,
        WATER: 0
      };
      const maxScores = {
        EARTH: 0,
        FIRE: 0,
        AIR: 0,
        WATER: 0
      };

      questions.forEach(q => {
        const element = q.element;
        scores[element] += answers[q.id];
        maxScores[element] += 5; // å„è³ªå•ã®æœ€å¤§å€¤ã¯5
      });

      // ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆè¨ˆç®—ï¼†ä¸¦ã¹æ›¿ãˆ
      const resultList = Object.keys(scores).map(key => {
        const raw = scores[key];
        const max = maxScores[key] || 1;
        const percent = Math.round(raw / max * 100);
        return { key, raw, max, percent };
      }).sort((a, b) => b.percent - a.percent);

      // ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆï¼ˆ1ä½ï¼‰
      const mainElement = resultList[0];
      latestTalentElementKey = mainElement.key;

      // çµæœHTMLç”Ÿæˆ
      let html = "";

      html += `<div class="result-title">æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®ãƒãƒ©ãƒ³ã‚¹</div>`;
      html += `<p class="small">æ•°å­—ãŒé«˜ã„ã»ã©ã€ãã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®æ‰èƒ½ã‚’ä»Šã‚ˆãä½¿ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚</p>`;

      resultList.forEach((r, index) => {
        html += `
          <div class="axis-row">
            <div class="axis-label">
              ${index + 1}. ${elementDisplayNames[r.key]}
            </div>
            <div class="axis-bar-wrap">
              <div class="axis-bar" style="width:${r.percent}%; background:#4b7bec;"></div>
            </div>
            <div class="axis-percent">${r.percent}%</div>
          </div>
        `;
      });

      html += `<p class="small">ğŸ‘‰ ã‚ãªãŸã®<strong>ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ</strong>ã¯ã€Œ<strong>${elementDisplayNames[mainElement.key]}</strong>ã€ã§ã™ã€‚</p>`;
      html += `<p class="small"><strong>${elementDisplayNames[mainElement.key]}</strong>ï¼š${elementDescriptions[mainElement.key]}</p>`;

      talentResultDiv.innerHTML = html;
      resultCard.style.display = "block";
      resultCard.scrollIntoView({ behavior: "smooth" });
    });

    // æ˜ŸÃ—æ‰èƒ½ã‚¿ã‚¤ãƒ—ã®è¡¨ç¤º
    const starElementSelect = document.getElementById("starElementSelect");
    const astroResultBtn = document.getElementById("astroResultBtn");
    const astroResultBox = document.getElementById("astroResultBox");

    astroResultBtn.addEventListener("click", () => {
      if (!latestTalentElementKey) {
        astroResultBox.innerHTML = "<p>ã¾ãšã¯ä¸Šã®è¨ºæ–­ã§ã€æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®çµæœã‚’å‡ºã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>";
        return;
      }
      const starElement = starElementSelect.value;
      if (!starElement) {
        astroResultBox.innerHTML = "<p>å¤ªé™½æ˜Ÿåº§ã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</p>";
        return;
      }

      const key = `${latestTalentElementKey}-${starElement}`;
      const typeData = talentStarTypes[key];

      if (!typeData) {
        astroResultBox.innerHTML = "<p>ã‚¿ã‚¤ãƒ—ã®çµ„ã¿åˆã‚ã›ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>";
        return;
      }

      const talentName = elementDisplayNames[latestTalentElementKey] || latestTalentElementKey;
      const starLabel = {
        FIRE: "FIREï¼ˆç«ï¼‰ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ",
        EARTH: "EARTHï¼ˆåœŸï¼‰ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ",
        AIR: "AIRï¼ˆé¢¨ï¼‰ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ",
        WATER: "WATERï¼ˆæ°´ï¼‰ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆ"
      }[starElement];

      let html = "";
      html += `<p class="small">æ‰èƒ½ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆï¼š<strong>${talentName}</strong><br>`;
      html += `å¤ªé™½æ˜Ÿåº§ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆï¼š<strong>${starLabel}</strong></p>`;
      html += `<p><strong>ã‚ãªãŸã¯ã€Œ${typeData.title}ã€ã§ã™ã€‚</strong><br>`;
      html += `<span class="small">${typeData.oneLine}</span></p>`;

      astroResultBox.innerHTML = html;
    });
  </script>

</body>
</html>
